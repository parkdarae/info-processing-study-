<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ì‹¤ê¸° í•µì‹¬ í‚¤ì›Œë“œ130 ë¬¸ì œì€í–‰</title>
    <!-- Force rebuild -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css?v=20251103210000">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/components/dashboard-common.css?v=20251106">
    <link rel="stylesheet" href="css/theory-frequent.css?v=20251105210000">
    <link rel="stylesheet" href="css/theory-category.css?v=20251105220000">
    <link rel="stylesheet" href="css/pmp-module.css?v=20251105230000">
    <link rel="stylesheet" href="css/cissp-module.css?v=20251216">
    <link rel="stylesheet" href="css/keyword130-module.css?v=20251106">
    <link rel="stylesheet" href="css/code-control-module.css?v=20251106">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            font-size: 16px;
        }

        body.font-smallest { font-size: 12px; }
        body.font-small { font-size: 14px; }
        body.font-normal { font-size: 16px; }
        body.font-large { font-size: 18px; }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content {
            flex: 1;
        }

        .hamburger-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            transition: all 0.3s;
            font-size: 1.5em;
        }

        .hamburger-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            animation: fadeIn 0.3s;
        }

        .menu-overlay.show {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .sidebar-menu {
            position: fixed;
            top: 0;
            right: -350px;
            width: 300px;
            height: 100%;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            z-index: 10001;
            transition: right 0.3s ease-out;
            overflow-y: auto;
        }

        .sidebar-menu.show {
            right: 0;
        }

        .menu-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-menu {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 1.2em;
            transition: all 0.3s;
        }

        .close-menu:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .menu-content {
            padding: 20px;
        }

        .menu-section {
            margin-bottom: 30px;
        }

        .menu-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .menu-item {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
            background: white;
        }

        .menu-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateX(5px);
        }

        .past-exam-selector {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 10px;
            background: white;
        }

        .past-exam-selector select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 0.95em;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .past-exam-selector select:hover {
            border-color: #667eea;
        }

        .past-exam-selector select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        .past-exam-info {
            font-size: 0.85em;
            color: #666;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #eee;
        }

        .font-size-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10002;
            align-items: center;
            justify-content: center;
        }

        .font-size-modal.show {
            display: flex;
        }

        .font-modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .font-size-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .font-size-option {
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-weight: bold;
        }

        .font-size-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .font-size-option.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .stats-toggle {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .stats-toggle:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-size: clamp(1.5em, 5vw, 2.5em);
        }
        
        .header p {
            font-size: clamp(0.9em, 2vw, 1.1em);
        }

        .mode-selector {
            padding: 10px 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .mode-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        .mode-buttons-container {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: start;
        }

        @media (max-width: 768px) {
            .mode-buttons-container {
                grid-template-columns: 1fr;
            }
            
            .mode-buttons {
                grid-template-columns: 1fr;
                gap: 12px;
            }
        }

        .mode-btn {
            padding: 10px 16px;
            border: 1px solid #dee2e6;
            background: white;
            color: #495057;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-size: 0.9em;
            font-weight: 500;
            white-space: nowrap;
        }

        .mode-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        
        .mode-btn i {
            margin-right: 6px;
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            }
            50% {
                box-shadow: 0 5px 20px rgba(102, 126, 234, 0.6);
            }
        }

        .question-container {
            padding: 30px;
            max-height: 600px;
            overflow-y: auto;
        }

        .question-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .question-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
            border-color: #667eea;
        }
        
        /* ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .question-card img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 3px 12px rgba(0,0,0,0.1);
            border: 2px solid #e9ecef;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 18px;
            border-bottom: 3px solid #e9ecef;
        }

        .question-no {
            font-size: 1.6em;
            font-weight: bold;
            color: #667eea;
            text-shadow: 0 2px 4px rgba(102, 126, 234, 0.1);
        }

        .question-text {
            font-size: 1.25em;
            line-height: 2.0;
            margin-bottom: 30px;
            color: #2c3e50;
            font-weight: 400;
            white-space: pre-line;  /* ì¤„ë°”ê¿ˆ ìœ ì§€, ì—°ì† ê³µë°±ì€ ì¶•ì•½ */
        }

        /* ë³´ê¸° ì„¹ì…˜ ì „ìš© ìŠ¤íƒ€ì¼ */
        .choices-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            border-radius: 8px;
            white-space: pre-wrap;  /* ê³µë°±ê³¼ ì¤„ë°”ê¿ˆ ëª¨ë‘ ìœ ì§€ */
            font-family: 'Noto Sans KR', 'Consolas', monospace;
            line-height: 1.9;
        }

        .choices-section-title {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1em;
            margin-bottom: 15px;
            display: block;
        }

        .choices {
            margin: 20px 0;
        }

        .choice-item {
            display: flex;
            align-items: flex-start;
            padding: 18px 20px;
            margin-bottom: 12px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            line-height: 1.8;
        }

        .choice-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .choice-item:hover {
            background: #e3f2fd;
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.2);
        }

        .choice-item:active {
            transform: translateX(5px) scale(0.98);
        }

        .choice-key {
            font-weight: bold;
            color: #667eea;
            margin-right: 15px;
            min-width: 35px;
            font-size: 1.1em;
        }

        .choice-text {
            flex: 1;
            white-space: pre-line;
            font-size: 1.05em;
            color: #2c3e50;
        }

        .answer-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-size: 1.1em;
            margin: 20px 0;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 25px;
        }

        .main-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .main-controls .btn {
            flex: 1;
            min-width: 100px;
        }

        .navigation-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .navigation-controls .btn {
            min-width: 50px;
            padding: 12px 20px;
        }

        .action-buttons .btn {
            white-space: nowrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-video {
            background: #ff0000;
            color: white;
        }

        .btn-video:hover {
            background: #cc0000;
        }

        .result-section {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        .result-section.show {
            display: block;
        }

        .result-correct {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 3px solid #28a745;
            color: #155724;
            animation: correctPulse 0.5s ease-out;
            font-size: 1.05em;
            line-height: 1.9;
        }

        .result-incorrect {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border: 3px solid #dc3545;
            color: #721c24;
            animation: shake 0.5s ease-out;
            font-size: 1.05em;
            line-height: 1.9;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes correctPulse {
            0% {
                transform: scale(0.9);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes shake {
            0%, 100% {
                transform: translateX(0);
            }
            25% {
                transform: translateX(-10px);
            }
            75% {
                transform: translateX(10px);
            }
        }

        .stats {
            background: white;
            padding: 12px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            min-width: 200px;
        }

        .stats h3 {
            margin: 0 0 8px 0;
            color: #667eea;
            font-size: 1em;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 5px;
        }

        .stats-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            padding: 3px 0;
        }
        
        .stats-item span:last-child {
            font-weight: bold;
            color: #667eea;
            transition: all 0.3s;
        }
        
        .stats-item span:last-child.updating {
            animation: numberBounce 0.5s ease-out;
        }

        @keyframes numberBounce {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
                color: #5568d3;
            }
        }
        
        .stats .btn {
            padding: 6px 12px;
            margin: 5px 0 0 0;
            font-size: 0.8em;
            width: 100%;
            transition: all 0.3s;
        }

        .stats .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .image-placeholder {
            width: 100%;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: center;
            color: #6c757d;
        }

        .image-preview {
            max-width: 100%;
            border-radius: 10px;
            margin: 20px 0;
        }

        .multiple-answers {
            margin: 20px 0;
        }

        .answer-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .answer-item label {
            min-width: 30px;
            font-weight: bold;
            color: #667eea;
            margin-right: 10px;
        }

        .answer-input-small {
            flex: 1;
            padding: 12px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
        }

        .symbol-buttons {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .symbol-buttons strong {
            display: block;
            margin-bottom: 10px;
            color: #667eea;
        }

        .symbol-btn {
            padding: 8px 15px;
            margin: 5px;
            border: 2px solid #667eea;
            background: white;
            border-radius: 6px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .symbol-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .table-container {
            margin: 20px 0;
            overflow-x: auto;
        }

        .table-caption {
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 1.15em;
            padding: 10px 0;
            border-bottom: 3px solid #667eea;
        }

        .table-after-text {
            margin-top: 15px;
            margin-bottom: 20px;
            padding: 12px;
            background: #f8f9fa;
            border-left: 3px solid #667eea;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .question-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .question-table thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .question-table th {
            padding: 15px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 1.05em;
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }

        .question-table td {
            padding: 13px 18px;
            border-bottom: 1px solid #e9ecef;
            font-size: 1.02em;
            line-height: 1.7;
        }

        .question-table tbody tr:hover {
            background: #f8f9fa;
        }

        .question-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* ì„¤ëª… ì°½ */
        .explanation {
            margin-top: 25px;
            padding: 25px;
            background: #fff9e6;
            border-left: 5px solid #ffc107;
            border-radius: 8px;
            white-space: pre-line;
            display: none;
            line-height: 2.0;
            font-size: 1.05em;
            box-shadow: 0 3px 10px rgba(255, 193, 7, 0.15);
        }

        .explanation.show {
            display: block;
        }
        
        /* í•´ì„¤ ë‚´ ìˆ«ì ë²ˆí˜¸ í¬ê¸° */
        .explanation code {
            font-size: 1em !important;
        }
        
        .explanation .code-box {
            font-size: 1.15em;
        }
        
        /* í•´ì„¤ì˜ pre.code-boxë§Œ í¬ê²Œ */
        .explanation pre.code-box {
            font-size: 1.3em;
            line-height: 2.0;
        }
        
        /* í•´ì„¤ ë‚´ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .explanation table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .explanation th,
        .explanation td {
            padding: 12px 15px;
            border: 1px solid #ddd;
            text-align: left;
            line-height: 1.7;
        }
        
        .explanation th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        /* í•´ì„¤ ë‚´ ì›í˜• ìˆ«ì ìŠ¤íƒ€ì¼ */
        .explanation .circle-number {
            font-size: 1em;
            font-weight: normal;
            display: inline;
        }

        /* ì½”ë“œ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .code-box {
            background: #1e1e1e;
            border: 2px solid #3c3c3c;
            border-left: 5px solid #667eea;
            border-radius: 10px;
            padding: 24px;
            margin: 25px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 1.05em;
            line-height: 1.8;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        /* ê¸°ë³¸ ì½”ë“œ ë¸”ë¡ì€ ì›ë˜ í¬ê¸° ìœ ì§€ */

        .code-box pre {
            margin: 0;
            padding: 0;
            background: transparent;
            border: none;
        }

        .code-box code {
            color: #d4d4d4;
            background: transparent;
            padding: 0;
            border: none;
            white-space: pre;
            font-size: inherit;
        }

        /* í‚¤ì›Œë“œ ê°•ì¡° */
        .code-box code .keyword {
            color: #569cd6;
            font-weight: bold;
        }

        .code-box code .string {
            color: #ce9178;
        }

        .code-box code .comment {
            color: #6a9955;
            font-style: italic;
        }

        /* ì„¤ëª…ì˜ ì½”ë“œ ë°•ìŠ¤ */
        .explanation .code-box {
            background: #1e1e1e;
            border: 2px solid #ffc107;
            border-left: 5px solid #ffc107;
            margin: 15px 0;
        }

        /* ì •ë‹µì˜ ì½”ë“œ ë°•ìŠ¤ */
        .result-section .code-box {
            background: #1e1e1e;
            margin: 15px 0;
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .welcome-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .welcome-popup.show {
            display: flex;
        }

        .popup-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .popup-content h2 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .popup-content ul {
            list-style: none;
            padding: 0;
        }

        .popup-content li {
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 5px;
        }

        /* ë²”ìœ„ ì„¤ì • ëª¨ë‹¬ */
        .range-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .range-modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            max-width: 400px;
            width: 90%;
        }

        .range-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .range-modal-header h3 {
            margin: 0;
            font-size: 1.3em;
            color: #333;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            color: #333;
        }

        .range-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .range-input-group {
            display: flex;
            flex-direction: column;
        }

        .range-input-group label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .range-input-group input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1.1em;
            text-align: center;
            transition: border-color 0.3s;
        }

        .range-input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .range-preview {
            background: #f5f7fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 0.95em;
            color: #666;
        }

        .range-order-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .range-order-options label {
            flex: 1;
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .range-order-options input[type="radio"] {
            margin-right: 8px;
        }

        .range-order-options label:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .range-order-options input[type="radio"]:checked + span {
            color: #667eea;
            font-weight: 600;
        }

        .range-modal-buttons {
            display: flex;
            gap: 10px;
        }

        .range-modal-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .range-modal-buttons .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .range-modal-buttons .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .range-modal-buttons .btn-secondary {
            background: #e0e0e0;
            color: #666;
        }

        .range-modal-buttons .btn-secondary:hover {
            background: #d0d0d0;
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
                font-size: 16px;
            }

            .container {
                margin: 0;
                border-radius: 0;
            }

            .header {
                padding: 15px 12px;
            }

            .question-container {
                padding: 15px 12px;
                max-height: none;
            }

            .choice-item {
                padding: 15px;
            }

            .choice-key {
                font-size: 1.2em;
            }

            .choice-text {
                font-size: 1.05em;
            }

            .answer-input {
                padding: 18px;
                font-size: 1.1em;
            }

            .mode-selector {
                padding: 8px 12px;
            }
            
            .mode-buttons {
                gap: 6px;
            }
            
            .mode-btn {
                padding: 8px 12px;
                font-size: 0.85em;
            }

            .question-text {
                font-size: 1.15em;
            }

            .stats {
                margin: 5px 0;
                padding: 10px;
            }

            .stats h3 {
                font-size: 1em;
            }

            .stats-grid {
                gap: 5px;
            }

            .stats-item {
                font-size: 0.85em;
                padding: 3px 0;
            }

            .stats .btn {
                padding: 5px 8px;
                font-size: 0.75em;
            }

            .btn {
                padding: 12px 20px;
                font-size: 0.95em;
            }

            .main-controls .btn {
                min-width: 80px;
                padding: 12px 15px;
                font-size: 0.9em;
            }

            .navigation-controls .btn {
                min-width: 45px;
                padding: 12px 15px;
            }

            .question-card {
                padding: 20px 15px;
            }
        }

        /* ========================================
           ì •ì²˜ê¸° ì‹¤ê¸° ì´ë¡  ëª¨ë“ˆ ìŠ¤íƒ€ì¼
           ======================================== */
        
        /* ì£¼ê´€ì‹ ë‹µì•ˆ ì…ë ¥ */
        .subjective-answer {
            margin-top: 30px;
        }
        
        .subjective-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1em;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-family: 'Noto Sans KR', sans-serif;
            transition: all 0.3s;
        }
        
        .subjective-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .subjective-hint {
            margin-top: 10px;
            color: #6c757d;
            font-size: 0.95em;
        }
        
        /* ë¬¸ì œ ë©”íƒ€ ì •ë³´ */
        .question-meta {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .question-category {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .question-subcategory {
            background: #f8f9fa;
            color: #667eea;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
        }
        
        /* ì„ íƒì§€ ëª©ë¡ */
        .choices-list {
            margin-top: 25px;
        }
        
        .choice-item.selected {
            background: #e3f2fd;
            border-color: #667eea;
            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.2);
        }
        
        /* ê²°ê³¼ ì„¹ì…˜ */
        .result-section {
            margin-top: 30px;
            padding: 25px;
            border-radius: 10px;
            border: 2px solid;
            animation: slideDown 0.3s ease-out;
        }
        
        .result-correct {
            background: #f1f9f1;
            border-color: #28a745;
        }
        
        .result-incorrect {
            background: #fff5f5;
            border-color: #dc3545;
        }
        
        .result-badge {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .result-correct .result-badge {
            color: #28a745;
        }
        
        .result-incorrect .result-badge {
            color: #dc3545;
        }
        
        .user-answer {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            font-size: 1.05em;
        }
        
        .correct-answer {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            font-size: 1.05em;
        }
        
        .explanation-content {
            line-height: 1.8;
        }
        
        .explanation-content p {
            margin: 10px 0;
        }
        
        /* ì™„ë£Œ í™”ë©´ */
        .complete-screen {
            text-align: center;
            padding: 50px 30px;
        }
        
        .complete-icon {
            font-size: 5em;
            margin-bottom: 20px;
        }
        
        .complete-screen h2 {
            color: #667eea;
            margin-bottom: 30px;
        }
        
        .complete-stats {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .complete-stats .stat-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 35px;
            border-radius: 15px;
            min-width: 150px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .complete-stats .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .complete-stats .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }
        
        .restart-btn {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 1.2em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn {
            padding: 15px 40px;
            font-size: 1.1em;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }
    </style>
</head>
<body>
    <!-- í™˜ì˜ íŒì—… -->
    <div class="welcome-popup" id="welcomePopup">
        <div class="popup-content">
            <h2>í•™ìŠµ ì‹œìŠ¤í…œ ì‚¬ìš© ì•ˆë‚´</h2>
            <p style="margin-bottom: 20px;">ì§€ì›ë˜ëŠ” ì •ë‹µ í˜•ì‹:</p>
            <ul>
                <li>ìˆ«ì: 1, 2, 3, 4</li>
                <li>ì˜ë¬¸: a, b, c, d</li>
                <li>í•œê¸€: ã„±, ã„´, ã„·, ã„¹</li>
                <li>ë²ˆí˜¸: â‘ , â‘¡, â‘¢, â‘£</li>
                <li>ëŒ€ì†Œë¬¸ì ë¬´ì‹œ: Agile = agile = AGILE</li>
                <li>ë„ì–´ì“°ê¸° ë¬´ì‹œ: ì• ìì¼ = ì•  ì ì¼</li>
                <li>ë™ì˜ì–´ ì¸ì‹: ì• ìì¼ = Agile</li>
                <li>ë³µìˆ˜ ì •ë‹µ: 1, 2 ë˜ëŠ” â‘ â‘¡</li>
            </ul>
            <button class="btn btn-primary" onclick="closeWelcomePopup()" style="width: 100%; margin-top: 20px;">ì‹œì‘í•˜ê¸°</button>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1><i class="fas fa-book-reader"></i> ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ì‹¤ê¸° í•µì‹¬ í‚¤ì›Œë“œ130 ë¬¸ì œì€í–‰</h1>
                <p>ì‹¤ì‹œê°„ í•™ìŠµ í˜„í™© ë° ì§„ë„ ê´€ë¦¬</p>
            </div>
            <button class="hamburger-btn" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div class="mode-selector">
            <div class="mode-buttons">
                <button class="mode-btn" onclick="setMode('sequential')">
                    <i class="fas fa-forward"></i> ìˆœì°¨ í’€ê¸°
                </button>
                <button class="mode-btn" onclick="setMode('random')">
                    <i class="fas fa-random"></i> ëœë¤ í’€ê¸°
                </button>
                <button class="mode-btn" onclick="setMode('range')">
                    <i class="fas fa-list"></i> ë²”ìœ„ ì„¤ì •
                </button>
                <button class="mode-btn" onclick="setMode('wrong')">
                    <i class="fas fa-times-circle"></i> ì˜¤ë‹µë§Œ í’€ê¸°
                </button>
                <button class="mode-btn" onclick="setMode('marked')">
                    <i class="fas fa-star"></i> ì²´í¬í•œ ë¬¸ì œ
                </button>
            </div>
        </div>

        <div class="question-container" id="questionContainer">
            <div class="question-card">
                <div style="text-align: center; padding: 50px;">
                    <i class="fas fa-book" style="font-size: 4em; color: #667eea; margin-bottom: 20px;"></i>
                    <h2>í•™ìŠµ ëª¨ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h2>
                    <p style="color: #6c757d; margin-top: 10px;">ìœ„ ë²„íŠ¼ ì¤‘ í•˜ë‚˜ë¥¼ í´ë¦­í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”</p>
                </div>
            </div>
        </div>
    </div>

    <!-- í–„ë²„ê±° ë©”ë‰´ -->
    <div class="menu-overlay" id="menuOverlay" onclick="closeMenu()"></div>
    <div class="sidebar-menu" id="sidebarMenu">
        <div class="menu-header">
            <h3><i class="fas fa-cog"></i> ë©”ë‰´</h3>
            <button class="close-menu" onclick="closeMenu()">Ã—</button>
        </div>
        <div class="menu-content">
            <div class="menu-section">
                <h3><i class="fas fa-book"></i> ë¬¸ì œì§‘ ì„ íƒ</h3>
                <div class="menu-item" onclick="switchModule('keyword130')" id="menu_keyword130">
                    <i class="fas fa-check"></i> ğŸ“š í•µì‹¬ í‚¤ì›Œë“œ130
                </div>
                <div class="menu-item" onclick="switchModule('code_control')" id="menu_code_control">
                    <i class="fas fa-code"></i> ğŸ’» ì½”ë“œ-ì œì–´ë¬¸14ë¬¸ì œ
                </div>
                <div class="menu-item" onclick="switchModule('theory_frequent')" id="menu_theory_frequent">
                    <i class="fas fa-star"></i> â­ ì‹¤ê¸° ìµœë¹ˆì¶œ 50ê°œ
                </div>
                <div class="menu-item" onclick="switchModule('cissp')" id="menu_cissp">
                    <i class="fas fa-shield-alt"></i> ğŸ›¡ï¸ CISSP ë¬¸ì œì€í–‰ (1850)
                </div>
                <div class="past-exam-selector" style="margin-top: 10px;">
                    <div style="font-weight: 500; margin-bottom: 10px; cursor: pointer;" onclick="togglePMPMenu()">
                        <i class="fas fa-project-diagram"></i> ğŸ“‹ PMP ë¬¸ì œì§‘ <i class="fas fa-chevron-down" id="pmpMenuIcon"></i>
                    </div>
                    <div id="pmpSubMenu" style="display: none; padding-left: 15px;">
                        <div class="menu-item" onclick="switchModule('pmp')" id="menu_pmp" style="padding: 8px 10px; font-size: 0.9em;">
                            <i class="fas fa-home"></i> ëŒ€ì‹œë³´ë“œ
                        </div>
                        <div class="menu-item" onclick="switchModule('pmp'); setTimeout(() => pmpModule.startStudy('all', 'sequential'), 100)" style="padding: 8px 10px; font-size: 0.9em;">
                            <i class="fas fa-play"></i> ìˆœì°¨í•™ìŠµ
                        </div>
                        <div class="menu-item" onclick="switchModule('pmp'); setTimeout(() => pmpModule.startStudy('all', 'random'), 100)" style="padding: 8px 10px; font-size: 0.9em;">
                            <i class="fas fa-random"></i> ëœë¤í•™ìŠµ
                        </div>
                        <div class="menu-item" onclick="switchModule('pmp'); setTimeout(() => pmpModule.startCardStudy('all', 'sequential'), 100)" style="padding: 8px 10px; font-size: 0.9em;">
                            <i class="fas fa-layer-group"></i> ì¹´ë“œí•™ìŠµ
                        </div>
                        <div class="menu-item" onclick="switchModule('pmp'); setTimeout(() => pmpModule.showRangeModal(), 100)" style="padding: 8px 10px; font-size: 0.9em;">
                            <i class="fas fa-sliders-h"></i> ë²”ìœ„í•™ìŠµ
                        </div>
                        <div class="menu-item" onclick="switchModule('pmp'); setTimeout(() => pmpModule.startBookmarkedStudy(), 100)" style="padding: 8px 10px; font-size: 0.9em;">
                            <i class="fas fa-star"></i> ì²´í¬ë¬¸ì œ
                        </div>
                    </div>
                </div>
                <div class="menu-item" onclick="switchModule('theory')" id="menu_theory">
                    <i class="fas fa-lightbulb"></i> ğŸ¯ ì •ì²˜ê¸° ì‹¤ê¸° ì´ë¡ 
                </div>
                <div class="past-exam-selector">
                    <div style="font-weight: 500; margin-bottom: 10px;">
                        <i class="fas fa-graduation-cap"></i> ğŸ“ ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ì‹¤ê¸° ê¸°ì¶œë¬¸ì œ
                    </div>
                    <select id="pastExamSelector" onchange="switchPastExam()">
                        <option value="">íšŒì°¨ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="2025_round1">2025ë…„ 1íšŒ</option>
                        <option value="2025_round2">2025ë…„ 2íšŒ</option>
                        <option value="2024_round3">2024ë…„ 3íšŒ</option>
                        <option value="2024_round2">2024ë…„ 2íšŒ</option>
                        <option value="2024_round1">2024ë…„ 1íšŒ</option>
                        <option value="2023_round3">2023ë…„ 3íšŒ</option>
                        <option value="2023_round2">2023ë…„ 2íšŒ</option>
                        <option value="2023_round1">2023ë…„ 1íšŒ</option>
                        <option value="2022_round3">2022ë…„ 3íšŒ</option>
                        <option value="2022_round2">2022ë…„ 2íšŒ</option>
                        <option value="2022_round1">2022ë…„ 1íšŒ</option>
                        <option value="2021_round1">2021ë…„ 1íšŒ</option>
                    </select>
                    <div class="past-exam-info" id="pastExamInfo">
                        ê¸°ì¶œë¬¸ì œë¥¼ ì„ íƒí•˜ë©´ í•´ë‹¹ íšŒì°¨ì˜ ë¬¸ì œë¥¼ í’€ì–´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>
                </div>
                <div class="past-exam-selector" style="margin-top: 20px;">
                    <div style="font-weight: 500; margin-bottom: 10px;">
                        <i class="fas fa-tags"></i> ğŸ“‚ ë¬¸ì œíŒ¨í„´ë³„ ê¸°ì¶œë¬¸ì œ
                    </div>
                    <select id="categorySelector" onchange="switchCategory()">
                        <option value="">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        <optgroup label="ğŸ’» í”„ë¡œê·¸ë˜ë°">
                            <option value="category_programming">ì „ì²´ (108ë¬¸ì œ)</option>
                            <option value="category_programming_java">â˜• Java (37ë¬¸ì œ)</option>
                            <option value="category_programming_c">ğŸ”§ Cì–¸ì–´ (34ë¬¸ì œ)</option>
                            <option value="category_programming_python">ğŸ Python (13ë¬¸ì œ)</option>
                        </optgroup>
                        <option value="category_network">ğŸŒ ë„¤íŠ¸ì›Œí¬ (32ë¬¸ì œ)</option>
                        <option value="category_database">ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ (29ë¬¸ì œ)</option>
                        <option value="category_software">âš™ï¸ ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ (19ë¬¸ì œ)</option>
                        <option value="category_sql">ğŸ“Š SQL (15ë¬¸ì œ)</option>
                        <option value="category_security">ğŸ”’ ì •ë³´ë³´ì•ˆ (14ë¬¸ì œ)</option>
                        <option value="category_os">ğŸ–¥ï¸ ìš´ì˜ì²´ì œ (9ë¬¸ì œ)</option>
                        <option value="category_datastructure">ğŸ“š ìë£Œêµ¬ì¡° (4ë¬¸ì œ)</option>
                        <option value="category_algorithm">ğŸ§® ì•Œê³ ë¦¬ì¦˜ (1ë¬¸ì œ)</option>
                    </select>
                    <div class="past-exam-info" id="categoryInfo">
                        ë¬¸ì œ íŒ¨í„´ë³„ë¡œ ë¶„ë¥˜ëœ ê¸°ì¶œë¬¸ì œë¥¼ í•™ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>
                </div>
            </div>
            <div class="menu-section">
                <h3><i class="fas fa-chart-line"></i> í•™ìŠµ í†µê³„</h3>
                <div class="menu-item" onclick="toggleStats()">
                    <i class="fas fa-eye"></i> í•™ìŠµ í†µê³„ ë³´ê¸°
                </div>
                <div class="menu-item" onclick="resetProgress()">
                    <i class="fas fa-redo"></i> í†µê³„ ì´ˆê¸°í™”
                </div>
            </div>
            <div class="menu-section">
                <h3><i class="fas fa-font"></i> í°íŠ¸ í¬ê¸°</h3>
                <div class="menu-item" onclick="openFontModal()">
                    <i class="fas fa-text-height"></i> í°íŠ¸ í¬ê¸° ë³€ê²½
                </div>
            </div>
            <div class="menu-section">
                <h3><i class="fas fa-info-circle"></i> ì •ë³´</h3>
                <div class="menu-item" onclick="showWelcome()">
                    <i class="fas fa-question-circle"></i> ì‚¬ìš© ë°©ë²•
                </div>
            </div>
        </div>
    </div>

    <!-- í°íŠ¸ í¬ê¸° ëª¨ë‹¬ -->
    <div class="font-size-modal" id="fontSizeModal">
        <div class="font-modal-content">
            <h2><i class="fas fa-text-height"></i> í°íŠ¸ í¬ê¸° ì„ íƒ</h2>
            <div class="font-size-grid">
                <div class="font-size-option" onclick="selectFontSize('smallest')">
                    <div style="font-size: 0.7em;">A</div>
                    <small>ì œì¼ ì‘ê²Œ</small>
                </div>
                <div class="font-size-option" onclick="selectFontSize('small')">
                    <div style="font-size: 0.85em;">A</div>
                    <small>ì‘ê²Œ</small>
                </div>
                <div class="font-size-option" onclick="selectFontSize('normal')">
                    <div style="font-size: 1em;">A</div>
                    <small>ë³´í†µ</small>
                </div>
                <div class="font-size-option" onclick="selectFontSize('large')">
                    <div style="font-size: 1.15em;">A</div>
                    <small>í¬ê²Œ</small>
                </div>
            </div>
            <button class="btn btn-primary" onclick="closeFontModal()" style="width: 100%;">í™•ì¸</button>
        </div>
    </div>

    <!-- í•™ìŠµ í†µê³„ ëª¨ë‹¬ -->
    <div class="range-modal" id="statsModal">
        <div class="range-modal-content">
            <div class="range-modal-header">
                <h3><i class="fas fa-chart-line"></i> í•™ìŠµ í†µê³„</h3>
                <button class="close-modal" onclick="closeStats()">Ã—</button>
            </div>
            <div class="stats-grid" style="margin-top: 20px;">
                <div class="stats-item" style="padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 10px;">
                    <span>ì§„í–‰ë¥ :</span>
                    <span id="modalProgress" style="font-size: 1.2em;">0%</span>
                </div>
                <div class="stats-item" style="padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 10px;">
                    <span>ì •ë‹µë¥ :</span>
                    <span id="modalAccuracy" style="font-size: 1.2em;">0%</span>
                </div>
                <div class="stats-item" style="padding: 15px; background: #f8f9fa; border-radius: 8px; margin-bottom: 10px;">
                    <span>ë‚¨ì€ ë¬¸ì œ:</span>
                    <span id="modalRemaining" style="font-size: 1.2em;">0</span>
                </div>
                <div class="stats-item" style="padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <span>ì˜¤ë‹µ ìˆ˜:</span>
                    <span id="modalWrongCount" style="font-size: 1.2em;">0</span>
                </div>
            </div>
            <button class="btn btn-secondary" onclick="resetProgress()" style="width: 100%; margin-top: 20px;">ì´ˆê¸°í™”</button>
        </div>
    </div>

    <!-- ë²”ìœ„ ì„¤ì • ëª¨ë‹¬ -->
    <div class="range-modal" id="rangeModal">
        <div class="range-modal-content">
            <div class="range-modal-header">
                <h3><i class="fas fa-list"></i> ë²”ìœ„ ì„¤ì •</h3>
                <button class="close-modal" onclick="closeRangeModal()">Ã—</button>
            </div>
            
            <div class="range-inputs">
                <div class="range-input-group">
                    <label>ì‹œì‘ ë¬¸ì œë²ˆí˜¸</label>
                    <input type="number" id="rangeStart" min="1" max="130" value="1">
                </div>
                <div class="range-input-group">
                    <label>ë ë¬¸ì œë²ˆí˜¸</label>
                    <input type="number" id="rangeEnd" min="1" max="130" value="130">
                </div>
            </div>
            
            <div class="range-preview" id="rangePreview">
                ì„ íƒëœ ë²”ìœ„: 1ë²ˆ ~ 130ë²ˆ (ì´ 130ë¬¸ì œ)
            </div>
            
            <div class="range-order-options">
                <label>
                    <input type="radio" name="rangeOrder" value="sequential" checked>
                    <span>ìˆœì°¨ í’€ê¸°</span>
                </label>
                <label>
                    <input type="radio" name="rangeOrder" value="random">
                    <span>ëœë¤ í’€ê¸°</span>
                </label>
            </div>
            
            <div class="range-modal-buttons">
                <button class="btn-secondary" onclick="closeRangeModal()">ì·¨ì†Œ</button>
                <button class="btn-primary" onclick="applyRangeFilter()">ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ì™€ ëª¨ë“ˆ ì„¤ì •ì€ config.jsì—ì„œ ê´€ë¦¬ë¨
        
        // ì •ê·œí™” í•¨ìˆ˜
        function normalizeAnswer(answer) {
            // ëŒ€ì†Œë¬¸ì ë¬´ì‹œ
            answer = answer.toLowerCase().trim();
            
            // ë„ì–´ì“°ê¸° ì œê±°
            answer = answer.replace(/\s/g, '');
            
            // ë™ì˜ì–´ ë³€í™˜
            for (let [key, values] of Object.entries(synonyms)) {
                if (values.includes(answer)) {
                    answer = key;
                    break;
                }
            }
            
            return answer;
        }

        // í‚¤ ë§¤í•‘
        function mapAnswerKey(input, choices) {
            // ìˆ«ì ë³€í™˜
            const numMap = {'1': '1', '2': '2', '3': '3', '4': '4', 
                           'â‘ ': '1', 'â‘¡': '2', 'â‘¢': '3', 'â‘£': '4',
                           'ã„±': '1', 'ã„´': '2', 'ã„·': '3', 'ã„¹': '4',
                           'a': '1', 'b': '2', 'c': '3', 'd': '4'};
            
            const lowerInput = input.toLowerCase().trim();
            if (numMap[lowerInput]) {
                return numMap[lowerInput];
            }
            
            // ë³µìˆ˜ ì •ë‹µ ì²˜ë¦¬
            const matches = input.match(/[1-4â‘ â‘¡â‘¢â‘£ã„±ã„´ã„·ã„¹abcd]/g);
            if (matches && matches.length > 1) {
                return matches.map(m => numMap[m.toLowerCase()]).filter(Boolean);
            }
            
            return lowerInput;
        }

        // ì •ë‹µ ì²´í¬ (ë‹¨ì¼ ë‹µì•ˆ)
        function checkAnswer(userAnswer, correctAnswer, choices) {
            if (!userAnswer) return false;
            
            // ì„œìˆ í˜• ë‹µì¸ ê²½ìš° (choicesê°€ ì—†ê±°ë‚˜ 0ê°œì¸ ê²½ìš°)
            if (!choices || choices.length === 0) {
                // ë‹µì•ˆ ë°°ì—´ ì²˜ë¦¬
                if (correctAnswer.keys && correctAnswer.keys.length > 0) {
                    // ì²« ë²ˆì§¸ ë‹µì•ˆìœ¼ë¡œ ë¹„êµ
                    const correctText = normalizeAnswerText(correctAnswer.keys[0]);
                    const userText = normalizeAnswerText(userAnswer);
                    return checkAnswerMatch(userText, correctText);
                } else {
                    // raw_textë¡œ ë¹„êµ
                    const correctText = normalizeAnswerText(correctAnswer.raw_text);
                    const userText = normalizeAnswerText(userAnswer);
                    return checkAnswerMatch(userText, correctText);
                }
            }
            
            // ê°ê´€ì‹ ë‹µ ì²´í¬
            const user = mapAnswerKey(userAnswer, choices);
            const correct = correctAnswer.keys;
            
            // ë³µìˆ˜ ì •ë‹µ
            if (Array.isArray(user)) {
                return JSON.stringify(user.sort()) === JSON.stringify(correct.sort());
            }
            
            // ë‹¨ì¼ ì •ë‹µ
            return correct.includes(user);
        }
        
        // ë¬¸ìì—´ ìœ ì‚¬ë„ ê³„ì‚°
        function calculateSimilarity(str1, str2) {
            const longer = str1.length > str2.length ? str1 : str2;
            const shorter = str1.length > str2.length ? str2 : str1;
            
            if (longer.length === 0) return 1.0;
            
            const editDistance = levenshteinDistance(longer, shorter);
            return (longer.length - editDistance) / longer.length;
        }
        
        // ë ˆë²¤ìŠˆíƒ€ì¸ ê±°ë¦¬ ê³„ì‚°
        function levenshteinDistance(str1, str2) {
            const matrix = [];
            
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            return matrix[str2.length][str1.length];
        }

        // í•™ìŠµ ëª¨ë“œ ì„¤ì •
        function setMode(mode) {
            currentMode = mode;
            
            // ë²„íŠ¼ í™œì„±í™”
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ë¬¸ì œ ë¡œë“œ
            loadQuestions(mode);
        }

        // ë¬¸ì œ ë¡œë“œ
        async function loadQuestions(mode) {
            try {
                const config = moduleConfig[currentModule];
                
                // items.jsonl ë¡œë“œ
                const response = await fetch(config.itemsFile);
                const text = await response.text();
                let questions = text.trim().split('\n').map(line => JSON.parse(line));
                
                // ì¹´í…Œê³ ë¦¬ ëª¨ë“œì¸ ê²½ìš° í•„í„°ë§
                if (config.isCategoryMode && config.category) {
                    questions = questions.filter(q => {
                        // 1ì°¨: ì¹´í…Œê³ ë¦¬ ë§¤ì¹­
                        const matchCategory = q.primary_category === config.category;
                        
                        // 2ì°¨: ì„œë¸Œì¹´í…Œê³ ë¦¬ ë§¤ì¹­ (ì„¤ì •ëœ ê²½ìš°ì—ë§Œ)
                        if (config.subcategory) {
                            const matchSubcategory = 
                                // tagsì— ì–¸ì–´ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
                                (q.tags && q.tags.includes(config.subcategory)) ||
                                // ë˜ëŠ” code_blocksì˜ languageì™€ ë§¤ì¹­
                                (q.code_blocks && q.code_blocks.some(cb => cb.language === config.subcategory));
                            return matchCategory && matchSubcategory;
                        }
                        
                        return matchCategory;
                    });
                    const filterDesc = config.subcategory ? 
                        `${config.category} > ${config.subcategory}` : 
                        config.category;
                    console.log(`ì¹´í…Œê³ ë¦¬ í•„í„°ë§: ${filterDesc} - ${questions.length}ê°œ ë¬¸ì œ`);
                }
                
                allQuestions = questions;
                
                // tables.jsonl ë¡œë“œ
                if (config.tablesFile) {
                    try {
                        const tablesResponse = await fetch(config.tablesFile);
                        const tablesText = await tablesResponse.text();
                        const tables = tablesText.trim().split('\n').map(line => JSON.parse(line));
                        
                        // í‘œë¥¼ IDë¡œ ì¸ë±ì‹±
                        allTables = {};
                        for (const table of tables) {
                            allTables[table.table_id] = table;
                        }
                        console.log(`${tables.length}ê°œ í‘œ ë¡œë“œ ì™„ë£Œ`);
                    } catch (e) {
                        console.log('í‘œ ë°ì´í„° ì—†ìŒ:', e);
                    }
                }
                
                // ëª¨ë“œë³„ í•„í„°ë§
                currentQuestions = filterQuestionsByMode(mode);
                
                if (currentQuestions.length === 0) {
                    showMessage('í•´ë‹¹ ëª¨ë“œì— ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                currentIndex = 0;
                displayQuestion(currentQuestions[0]);
                updateStats();
                
            } catch (error) {
                console.error('ë¬¸ì œ ë¡œë“œ ì˜¤ë¥˜:', error);
                showMessage('ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        // ëª¨ë“œë³„ í•„í„°ë§
        function filterQuestionsByMode(mode) {
            const savedProgress = JSON.parse(localStorage.getItem('progress') || '{}');
            const wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions') || '[]');
            const markedQuestions = JSON.parse(localStorage.getItem('markedQuestions') || '[]');
            
            switch(mode) {
                case 'sequential':
                    return allQuestions;
                    
                case 'random':
                    return shuffleArray([...allQuestions]);
                    
                case 'range':
                    // ëª¨ë‹¬ ì°½ í‘œì‹œ
                    showRangeModal();
                    return [];
                    
                case 'wrong':
                    return allQuestions.filter(q => wrongQuestions.includes(q.q_no));
                    
                case 'marked':
                    return allQuestions.filter(q => markedQuestions.includes(q.q_no));
                    
                default:
                    return allQuestions;
            }
        }

        // ëª¨ë“ˆ ì „í™˜
        function switchModule(moduleName) {
            closeMenu();
            
            if (!moduleConfig[moduleName]) {
                showMessage('ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.');
                return;
            }
            
            currentModule = moduleName;
            const config = moduleConfig[moduleName];
            
            // ì œëª© ì—…ë°ì´íŠ¸
            document.querySelector('.header h1').innerHTML = `<i class="fas fa-book-reader"></i> ${config.title}`;
            
            // ë©”ë‰´ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.menu-item').forEach(item => {
                item.style.background = 'white';
                item.style.color = '';
            });
            const menuItem = document.getElementById(`menu_${moduleName}`);
            if (menuItem) {
                menuItem.style.background = '#667eea';
                menuItem.style.color = 'white';
            }
            
            // ë²”ìœ„ ëª¨ë‹¬ max ê°’ ì—…ë°ì´íŠ¸
            document.getElementById('rangeStart').max = config.maxRange;
            document.getElementById('rangeEnd').max = config.maxRange;
            document.getElementById('rangeEnd').value = config.maxRange;
            
            // ë¬¸ì œ ë¡œë“œ
            if (currentMode) {
                loadQuestions(currentMode);
            } else {
                currentQuestions = [];
                currentIndex = 0;
                document.getElementById('questionContainer').innerHTML = `
                    <div class="question-card">
                        <div style="text-align: center; padding: 50px;">
                            <i class="fas fa-book" style="font-size: 4em; color: #667eea; margin-bottom: 20px;"></i>
                            <h2>í•™ìŠµ ëª¨ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h2>
                            <p style="color: #6c757d; margin-top: 10px;">ìœ„ ë²„íŠ¼ ì¤‘ í•˜ë‚˜ë¥¼ í´ë¦­í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”</p>
                        </div>
                    </div>
                `;
            }
            
            updateStats();
        }

        // ê¸°ì¶œë¬¸ì œ íšŒì°¨ ì„ íƒ
        function switchPastExam() {
            const selector = document.getElementById('pastExamSelector');
            const examId = selector.value;
            
            if (!examId) {
                return;
            }
            
            // switchModule í˜¸ì¶œ
            switchModule(examId);
            
            // ì •ë³´ ì—…ë°ì´íŠ¸
            const config = moduleConfig[examId];
            const infoDiv = document.getElementById('pastExamInfo');
            infoDiv.innerHTML = `
                <i class="fas fa-check-circle" style="color: #667eea;"></i> 
                ì„ íƒë¨: ${config.maxRange}ê°œ ë¬¸ì œ
            `;
            
            // ê¸°ì¡´ ë©”ë‰´ ì•„ì´í…œ ë¹„í™œì„±í™”
            document.querySelectorAll('.menu-item').forEach(item => {
                item.style.background = 'white';
                item.style.color = '';
            });
        }
        
        // ì¹´í…Œê³ ë¦¬ë³„ ë¬¸ì œ ì„ íƒ
        function switchCategory() {
            const selector = document.getElementById('categorySelector');
            const categoryId = selector.value;
            
            if (!categoryId) {
                return;
            }
            
            closeMenu();
            
            // switchModule í˜¸ì¶œ
            switchModule(categoryId);
            
            // ì •ë³´ ì—…ë°ì´íŠ¸
            const config = moduleConfig[categoryId];
            const infoDiv = document.getElementById('categoryInfo');
            infoDiv.innerHTML = `
                <i class="fas fa-check-circle" style="color: #667eea;"></i> 
                ì„ íƒë¨: ${config.title}
            `;
            
            // ê¸°ì¡´ ë©”ë‰´ ì•„ì´í…œ ë° ê¸°ì¶œë¬¸ì œ ì„ íƒ ì´ˆê¸°í™”
            document.querySelectorAll('.menu-item').forEach(item => {
                item.style.background = 'white';
                item.style.color = '';
            });
            document.getElementById('pastExamSelector').value = '';
        }
        
        // ë°°ì—´ ì„ê¸°
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // ë²”ìœ„ ì„¤ì • ëª¨ë‹¬ í‘œì‹œ
        function showRangeModal() {
            const modal = document.getElementById('rangeModal');
            modal.style.display = 'flex';
            
            // ì…ë ¥ê°’ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            const startInput = document.getElementById('rangeStart');
            const endInput = document.getElementById('rangeEnd');
            
            startInput.addEventListener('input', updateRangePreview);
            endInput.addEventListener('input', updateRangePreview);
            
            updateRangePreview();
        }

        // ë²”ìœ„ ì„¤ì • ëª¨ë‹¬ ë‹«ê¸°
        function closeRangeModal() {
            const modal = document.getElementById('rangeModal');
            modal.style.display = 'none';
        }

        // ë²”ìœ„ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        function updateRangePreview() {
            const config = moduleConfig[currentModule];
            const start = parseInt(document.getElementById('rangeStart').value) || 1;
            const end = parseInt(document.getElementById('rangeEnd').value) || config.maxRange;
            
            // ìœ íš¨ì„± ê²€ì‚¬
            const validStart = Math.max(1, Math.min(start, config.maxRange));
            const validEnd = Math.max(validStart, Math.min(end, config.maxRange));
            
            const count = validEnd - validStart + 1;
            const preview = document.getElementById('rangePreview');
            preview.textContent = `ì„ íƒëœ ë²”ìœ„: ${validStart}ë²ˆ ~ ${validEnd}ë²ˆ (ì´ ${count}ë¬¸ì œ)`;
        }

        // ë²”ìœ„ í•„í„° ì ìš©
        async function applyRangeFilter() {
            const config = moduleConfig[currentModule];
            const start = parseInt(document.getElementById('rangeStart').value) || 1;
            const end = parseInt(document.getElementById('rangeEnd').value) || config.maxRange;
            const order = document.querySelector('input[name="rangeOrder"]:checked').value;
            
            // ìœ íš¨ì„± ê²€ì‚¬
            const validStart = Math.max(1, Math.min(start, config.maxRange));
            const validEnd = Math.max(validStart, Math.min(end, config.maxRange));
            
            // ëª¨ë‹¬ ë‹«ê¸°
            closeRangeModal();
            
            // ë¬¸ì œ ë¡œë“œ
            try {
                const config = moduleConfig[currentModule];
                
                // items.jsonl ë¡œë“œ
                const response = await fetch(config.itemsFile);
                const text = await response.text();
                allQuestions = text.trim().split('\n').map(line => JSON.parse(line));
                
                // tables.jsonl ë¡œë“œ
                if (config.tablesFile) {
                    try {
                        const tablesResponse = await fetch(config.tablesFile);
                        const tablesText = await tablesResponse.text();
                        const tables = tablesText.trim().split('\n').map(line => JSON.parse(line));
                        
                        // í‘œë¥¼ IDë¡œ ì¸ë±ì‹±
                        allTables = {};
                        for (const table of tables) {
                            allTables[table.table_id] = table;
                        }
                        console.log(`${tables.length}ê°œ í‘œ ë¡œë“œ ì™„ë£Œ`);
                    } catch (e) {
                        console.log('í‘œ ë°ì´í„° ì—†ìŒ:', e);
                    }
                }
                
                // ë²”ìœ„ í•„í„°ë§ (Q ë˜ëŠ” C ì ‘ë‘ì‚¬ ì²˜ë¦¬)
                currentQuestions = allQuestions.filter(q => {
                    const num = parseInt(q.q_no.replace(/^[QC]/, '').replace(/^0+/, '') || '0');
                    return num >= validStart && num <= validEnd;
                });
                
                // ìˆœì„œ ì ìš©
                if (order === 'random') {
                    currentQuestions = shuffleArray(currentQuestions);
                }
                
                if (currentQuestions.length === 0) {
                    showMessage('í•´ë‹¹ ë²”ìœ„ì— ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                currentIndex = 0;
                currentMode = 'range';
                displayQuestion(currentQuestions[currentIndex]);
                
                showMessage(`${validStart}~${validEnd}ë²ˆ ë¬¸ì œ ${currentQuestions.length}ê°œ ë¡œë“œ ì™„ë£Œ!`);
            } catch (error) {
                console.error('ë¬¸ì œ ë¡œë“œ ì‹¤íŒ¨:', error);
                showMessage('ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        // ë¬¸ì œ í‘œì‹œ
        function displayQuestion(question) {
            const container = document.getElementById('questionContainer');
            
            let html = `
                <div class="question-card">
                    <div class="question-header">
                        <div class="question-no">${question.q_no}</div>
                        <button class="btn btn-secondary" onclick="markQuestion('${question.q_no}')">
                            <i class="fas fa-star"></i> ì²´í¬
                        </button>
                    </div>
                    <div class="question-text">${formatCodeBlocks(question.question_text)}</div>
            `;
            
            // ì´ë¯¸ì§€ í‘œì‹œ
            if (question.image_refs && question.image_refs.length > 0) {
                for (let img of question.image_refs) {
                    // imgì— ì´ë¯¸ images/ ê²½ë¡œê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ê·¸ëŒ€ë¡œ ì‚¬ìš©
                    html += `<img src="${img}" class="image-preview" alt="ë¬¸ì œ ì´ë¯¸ì§€">`;
                }
            }
            
            // í‘œ í‘œì‹œ
            if (question.table_refs && question.table_refs.length > 0) {
                for (let tableRef of question.table_refs) {
                    const table = allTables[tableRef];
                    if (table) {
                        html += '<div class="table-container">';
                        if (table.caption && table.caption.trim() !== '') {
                            html += `<div class="table-caption">${escapeHtml(table.caption)}</div>`;
                        }
                        html += '<table class="question-table">';
                        
                        // í—¤ë” (header ë˜ëŠ” headers í•„ë“œ ëª¨ë‘ ì§€ì›)
                        const headerData = table.headers || table.header;
                        if (headerData && headerData.length > 0) {
                            html += '<thead><tr>';
                            for (let cell of headerData) {
                                html += `<th>${escapeHtml(cell)}</th>`;
                            }
                            html += '</tr></thead>';
                        }
                        
                        // ë°”ë””
                        html += '<tbody>';
                        if (table.rows && table.rows.length > 0) {
                            for (let row of table.rows) {
                                html += '<tr>';
                                for (let cell of row) {
                                    // ì…€ ë‚´ìš©ì´ ì´ë¯¸ì§€ íŒŒì¼ëª…ì¸ì§€ í™•ì¸
                                    if (cell && typeof cell === 'string' && (cell.endsWith('.png') || cell.endsWith('.jpg') || cell.endsWith('.jpeg') || cell.endsWith('.gif'))) {
                                        html += `<td><img src="images/${cell}" class="table-image" alt=""></td>`;
                                    } else if (cell && typeof cell === 'string' && cell.includes('<strong>')) {
                                        // HTML íƒœê·¸ê°€ í¬í•¨ëœ ê²½ìš° ì´ìŠ¤ì¼€ì´í”„í•˜ì§€ ì•ŠìŒ
                                        html += `<td>${cell}</td>`;
                                    } else {
                                        // ì¼ë°˜ í…ìŠ¤íŠ¸ëŠ” ì´ìŠ¤ì¼€ì´í”„
                                        html += `<td>${escapeHtml(cell).replace(/\n/g, '<br>')}</td>`;
                                    }
                                }
                                html += '</tr>';
                            }
                        }
                        html += '</tbody></table></div>';
                        
                        // í‘œ ë’¤ì— ì¶”ê°€ í…ìŠ¤íŠ¸ê°€ ìˆìœ¼ë©´ í‘œì‹œ
                        if (table.after_text) {
                            html += `<div class="table-after-text">${escapeHtml(table.after_text).replace(/\n/g, '<br>')}</div>`;
                        }
                    }
                }
            }
            
            // Q062 ë³´ê¸° (í…Œì´ë¸” ë’¤)
            if (question.q_no === 'Q062') {
                html += `
                    <div class="choices-section" style="margin-top: 20px;">
                        <strong>&lt;ë³´ê¸°&gt;</strong><br>
                        â€¢ Equivalence Partition<br>
                        â€¢ Boundary Value Analysis<br>
                        â€¢ Condition Test<br>
                        â€¢ Cause-Effect Graph<br>
                        â€¢ Error Guess<br>
                        â€¢ Comparison Test<br>
                        â€¢ Base Path Test<br>
                        â€¢ Loop Test<br>
                        â€¢ Data Flow Test
                    </div>
                `;
            }
            
            // ì„ íƒì§€ í‘œì‹œ
            if (question.choices && question.choices.length > 0) {
                html += '<div class="choices">';
                for (let choice of question.choices) {
                    html += `
                        <div class="choice-item" onclick="selectChoice(this)">
                            <span class="choice-key">${choice.raw_key}</span>
                            <span class="choice-text">${escapeHtml(choice.text)}</span>
                        </div>
                    `;
                }
                html += '</div>';
            }
            
            // ë³µìˆ˜ ë‹µì•ˆ ê°œìˆ˜ í™•ì¸
            let numAnswers = 1;
            
            // 1. ê´„í˜¸ ì•ˆ ë²ˆí˜¸ ë²”ìœ„ ì¶”ì¶œ: (â‘ ~â‘¤)
            const rangeMatch = question.question_text.match(/\([\s]*([â‘ -â‘³])[\s]*~[\s]*([â‘ -â‘³])[\s]*\)/);
            if (rangeMatch) {
                const startNum = rangeMatch[1].charCodeAt(0) - 0x2460 + 1;
                const endNum = rangeMatch[2].charCodeAt(0) - 0x2460 + 1;
                numAnswers = endNum - startNum + 1;
            }
            
            // 2. ê´„í˜¸ ì•ˆ ë²ˆí˜¸ ê°œìˆ˜ ì¶”ì¶œ: (â‘ , â‘¡) ë˜ëŠ” (â‘  â‘¡ â‘¢)
            if (numAnswers === 1) {
                const bracketNumbers = question.question_text.match(/\([\s]*([â‘ -â‘³][\s,]*[\sâ‘ -â‘³]*)+\s*\)/);
                if (bracketNumbers) {
                    const matches = bracketNumbers[0].match(/[â‘ -â‘³]/g);
                    if (matches && matches.length > 1) {
                        numAnswers = matches.length;
                    }
                }
            }
            
            // 3. ì •ë‹µ ë°°ì—´ ê¸¸ì´ë¡œ í™•ì¸
            if (numAnswers === 1 && question.answer && question.answer.keys && question.answer.keys.length > 1) {
                numAnswers = question.answer.keys.length;
            }
            
            // 16ë²ˆ, 17ë²ˆì€ íŠ¹ìˆ˜: ìˆœì°¨ ì…ë ¥ ëª¨ë“œ (1ê°œ ì…ë ¥ì°½)
            if (question.q_no === 'Q016' || question.q_no === 'Q017') {
                numAnswers = 1;
            }
            
            // ì…ë ¥ í•„ë“œ ìƒì„±
            if (numAnswers > 1) {
                // ë³µìˆ˜ ë‹µì•ˆ ì…ë ¥ì°½
                html += `<div class="multiple-answers">`;
                
                // íŠ¹ì • ë¬¸ì œëŠ” ì»¤ìŠ¤í…€ ë¼ë²¨
                const customLabels = {
                    'Q013': ['ì¹´ë””ë„ë¦¬í‹°:', 'ë””ê·¸ë¦¬:'],
                    'Q008': ['ê³„ì‚°ì‹:', 'ë‹µ:'],
                    'Q122': ['LEVEL:']
                };
                
                for (let i = 0; i < numAnswers; i++) {
                    let label;
                    
                    if (customLabels[question.q_no] && customLabels[question.q_no][i]) {
                        label = customLabels[question.q_no][i];
                    } else {
                        const num = String.fromCharCode(0x2460 + i); // â‘ , â‘¡, ...
                        label = `${num}:`;
                    }
                    
                    html += `
                        <div class="answer-item">
                            <label>${label}</label>
                            <input type="text" class="answer-input-small" id="answerInput_${i}" 
                                   placeholder="ë‹µ ì…ë ¥">
                        </div>
                    `;
                }
                html += `</div>`;
                
                // íŠ¹ìˆ˜ë¬¸ìê°€ í•„ìš”í•œì§€ í™•ì¸ (ì •ë‹µì— íŠ¹ìˆ˜ë¬¸ìê°€ í¬í•¨ë˜ì–´ ìˆëŠ” ê²½ìš°ë§Œ)
                const hasSymbols = question.answer && question.answer.keys && 
                    question.answer.keys.some(ans => /[âˆªâ€•Ã—Ï€â–·â—âˆ©Ã·Î”]/.test(ans));
                
                if (hasSymbols) {
                    html += `
                        <div class="symbol-buttons">
                            <strong>ìì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°í˜¸:</strong>
                            <button class="symbol-btn" onclick="insertSymbol('âˆª')">âˆª</button>
                            <button class="symbol-btn" onclick="insertSymbol('â€•')">â€•</button>
                            <button class="symbol-btn" onclick="insertSymbol('Ã—')">Ã—</button>
                            <button class="symbol-btn" onclick="insertSymbol('Ï€')">Ï€</button>
                            <button class="symbol-btn" onclick="insertSymbol('â–·â—')">â–·â—</button>
                            <button class="symbol-btn" onclick="insertSymbol('âˆ©')">âˆ©</button>
                            <button class="symbol-btn" onclick="insertSymbol('Ã·')">Ã·</button>
                            <button class="symbol-btn" onclick="insertSymbol('Î”')">Î”</button>
                        </div>
                    `;
                }
            } else {
                // ë‹¨ì¼ ë‹µì•ˆ ì…ë ¥ì°½
                const needsSymbols = needsSymbolInput(question);
                const placeholder = needsSymbols ? 'íŠ¹ìˆ˜ë¬¸ì ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì…ë ¥í•˜ì„¸ìš”' : 'ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 1, 2, a, b, ã„±, â‘ )';
                const isReadonly = needsSymbols;
                html += `
                    <input type="text" class="answer-input" id="answerInput_0" 
                           placeholder="${placeholder}" ${isReadonly ? 'readonly' : ''}>
                `;
            }
            
            // ë‹µì•ˆì— íŠ¹ìˆ˜ë¬¸ìê°€ í¬í•¨ëœ ê²½ìš°ë§Œ ë²„íŠ¼ í‘œì‹œ
            if (needsSymbolInput(question)) {
                html += `
                    <div class="symbol-buttons">
                        <strong>ê¸°í˜¸ë¥¼ ìˆœì„œëŒ€ë¡œ í´ë¦­í•˜ì„¸ìš” (ë‹¤ì‹œ í´ë¦­í•˜ë©´ ì œê±°):</strong>
                        <button class="symbol-btn" onclick="insertSymbol('âˆª')">âˆª</button>
                        <button class="symbol-btn" onclick="insertSymbol('â€•')">â€•</button>
                        <button class="symbol-btn" onclick="insertSymbol('Ã—')">Ã—</button>
                        <button class="symbol-btn" onclick="insertSymbol('Ï€')">Ï€</button>
                        <button class="symbol-btn" onclick="insertSymbol('â–·â—')">â–·â—</button>
                        <button class="symbol-btn" onclick="insertSymbol('âˆ©')">âˆ©</button>
                        <button class="symbol-btn" onclick="insertSymbol('Ã·')">Ã·</button>
                        <button class="symbol-btn" onclick="insertSymbol('Î”')">Î”</button>
                    </div>
                `;
            }
            
            html += `
                    <div class="action-buttons">
                        <div class="main-controls">
                            <button class="btn btn-primary" onclick="checkCurrentAnswer()">
                                <i class="fas fa-check"></i> ì œì¶œ
                            </button>
                            <button class="btn" onclick="showAnswerOnly()" style="background: #17a2b8; color: white;">
                                <i class="fas fa-eye"></i> ë‹µ
                            </button>
                            <button class="btn btn-secondary" onclick="showExplanation()">
                                <i class="fas fa-lightbulb"></i> í•´ì„¤
                            </button>
                            <button class="btn btn-video" onclick="openVideo()" id="videoBtn" style="display: none;">
                                <i class="fab fa-youtube"></i> ë™ì˜ìƒ
                            </button>
                        </div>
                        <div class="navigation-controls">
                            <button class="btn btn-secondary" onclick="prevQuestion()">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="btn btn-secondary" onclick="returnToDashboard()">
                                <i class="fas fa-home"></i>
                            </button>
                            <button class="btn btn-secondary" onclick="nextQuestion()">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div class="result-section" id="resultSection" style="display: none;"></div>
                    <div class="explanation" id="explanationDiv"></div>
            </div>
            `;
            
            container.innerHTML = html;
            
            // ë™ì˜ìƒ ë²„íŠ¼ í‘œì‹œ ì—…ë°ì´íŠ¸
            setTimeout(() => {
                updateVideoButton();
            }, 0);
        }

        // ì´ë¯¸ ë‹µë³€í•œ ë¬¸ì œ ì¶”ì ì€ App.state.answeredQuestions ì‚¬ìš© (config.js)

        // ì •ë‹µ í™•ì¸
        function checkCurrentAnswer() {
            const question = currentQuestions[currentIndex];
            const questionId = question.q_no;
            
            // ì´ë¯¸ ë‹µë³€í–ˆìœ¼ë©´ ë¬´ì‹œ
            if (App.state.answeredQuestions.has(questionId)) {
                console.log('ì´ë¯¸ ë‹µë³€í•œ ë¬¸ì œì…ë‹ˆë‹¤.');
                return;
            }
            
            // ë³µìˆ˜ ë‹µì•ˆì¸ì§€ í™•ì¸
            let userAnswers = [];
            const answerInput0 = document.getElementById('answerInput_0');
            
            if (answerInput0) {
                // ëª¨ë“  ì…ë ¥ì°½ í™•ì¸ (0ë¶€í„° ì‹œì‘)
                for (let i = 0; i < 10; i++) {
                    const input = document.getElementById(`answerInput_${i}`);
                    if (input) {
                        userAnswers.push(input.value);
                    }
                }
            }
            
            // ë‹µë³€ ì…ë ¥ í™•ì¸
            if (userAnswers.length === 0 || userAnswers.every(a => !a || !a.trim())) {
                alert('ë‹µì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const isCorrect = checkMultipleAnswer(userAnswers, question);
            const resultSection = document.getElementById('resultSection');
            
            // ì´ë¯¸ ë‹µë³€í–ˆë‹¤ê³  í‘œì‹œ
            App.state.answeredQuestions.add(questionId);
            
            // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
            resultSection.style.display = 'block';
            
            if (isCorrect) {
                resultSection.className = 'result-section result-correct show';
                resultSection.innerHTML = '<i class="fas fa-check-circle"></i> <strong>ì •ë‹µì…ë‹ˆë‹¤!</strong>';
                stats.correct++;
                removeWrongQuestion(question.q_no);
            } else {
                resultSection.className = 'result-section result-incorrect show';
                
                // ì •ë‹µ í…ìŠ¤íŠ¸ ì²˜ë¦¬ (ê´„í˜¸ ì œê±°)
                let answerText = question.answer.raw_text || 'ì •ë‹µ ì—†ìŒ';
                
                // ê´„í˜¸ ì•ˆ ë‚´ìš© ì œê±°
                answerText = answerText.replace(/\([^)]*\)/g, '');
                // â€¢ ì œê±°
                answerText = answerText.replace(/[â€¢]/g, '');
                // ì—¬ëŸ¬ ê³µë°±ì„ í•˜ë‚˜ë¡œ
                answerText = answerText.replace(/\s+/g, ' ').trim();
                
                resultSection.innerHTML = `
                    <i class="fas fa-times-circle"></i> <strong>ì˜¤ë‹µì…ë‹ˆë‹¤.</strong><br>
                    <strong>ì •ë‹µ:</strong> ${formatCodeBlocks(answerText)}
                `;
                stats.wrong++;
                addWrongQuestion(question.q_no);
            }
            
            // LocalStorageì— ì €ì¥
            saveProgress();
            updateStats();
        }
        
        // ë³µìˆ˜ ë‹µì•ˆ ì²´í¬ (ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­)
        function checkMultipleAnswer(userAnswers, question) {
            const correctAnswers = question.answer.keys || [];
            
            console.log('=== ë³µìˆ˜ ë‹µì•ˆ ì²´í¬ ===');
            console.log('ë¬¸ì œ:', question.q_no);
            console.log('ì…ë ¥:', userAnswers);
            console.log('ì •ë‹µ:', correctAnswers);
            
            if (userAnswers.length !== correctAnswers.length) {
                console.log('âŒ ë‹µì•ˆ ê°œìˆ˜ ë¶ˆì¼ì¹˜');
                return false;
            }
            
            // Q060 íŠ¹ë³„ ì²˜ë¦¬: ìˆ«ìë§Œ ë¹„êµ
            if (question.q_no === 'Q060') {
                console.log('ğŸ”¢ Q060 ìˆ«ì ì „ìš© ë§¤ì¹­');
                for (let i = 0; i < userAnswers.length; i++) {
                    const userDigits = (userAnswers[i] || '').toString().replace(/[^0-9]/g, '');
                    const correctDigits = (correctAnswers[i] || '').toString().replace(/[^0-9]/g, '');
                    console.log(`  [${i+1}] "${userDigits}" === "${correctDigits}" ?`, userDigits === correctDigits);
                    if (userDigits !== correctDigits) {
                        console.log('âŒ ë¶ˆì¼ì¹˜');
                        return false;
                    }
                }
                console.log('âœ… Q060 ì •ë‹µ!');
                return true;
            }
            
            // ê° ë‹µì•ˆ ë¹„êµ (ìˆœì„œ ì¤‘ìš”)
            for (let i = 0; i < userAnswers.length; i++) {
                const user = normalizeAnswerText(userAnswers[i]);
                const correct = normalizeAnswerText(correctAnswers[i]);
                
                console.log(`ë‹µì•ˆ ${i+1}:`);
                console.log('  ì…ë ¥:', user);
                console.log('  ì •ë‹µ:', correct);
                
                // í‚¤ì›Œë“œ ê¸°ë°˜ ë§¤ì¹­
                const match = checkAnswerMatch(user, correct);
                console.log('  ê²°ê³¼:', match ? 'âœ…' : 'âŒ');
                
                if (!match) {
                    return false;
                }
            }
            
            console.log('âœ… ì •ë‹µ!');
            return true;
        }
        
        // ë‹µì•ˆ í…ìŠ¤íŠ¸ ì •ê·œí™”
        function normalizeAnswerText(text) {
            if (!text) return '';
            
            // ì†Œë¬¸ìë¡œ ë³€í™˜
            text = text.toLowerCase();
            
            // ì›ë¬¸ìë¥¼ í•œê¸€ ììŒìœ¼ë¡œ ë³€í™˜ (ã‰ â†’ã„±, ã‰¡â†’ã„´, ã‰¢â†’ã„·, ã‰£â†’ã„¹, ã‰¤â†’ã…, ã‰¥â†’ã…‚, ã‰¦â†’ã……, ã‰§â†’ã…‡, ã‰¨â†’ã…ˆ)
            const circledToJamo = {
                'ã‰ ': 'ã„±', 'ã‰¡': 'ã„´', 'ã‰¢': 'ã„·', 'ã‰£': 'ã„¹', 'ã‰¤': 'ã…',
                'ã‰¥': 'ã…‚', 'ã‰¦': 'ã……', 'ã‰§': 'ã…‡', 'ã‰¨': 'ã…ˆ', 'ã‰©': 'ã…Š'
            };
            text = text.replace(/[ã‰ -ã‰©]/g, match => circledToJamo[match] || match);
            
            // ê´„í˜¸ ì•ˆ ë‚´ìš© ì œê±°: ê´€ê³„(Relationship) -> ê´€ê³„
            text = text.replace(/\([^)]*\)/g, '');
            
            // ë„ì–´ì“°ê¸° ì œê±°
            text = text.replace(/\s+/g, '');
            
            // ê¸°íƒ€ íŠ¹ìˆ˜ë¬¸ì ì •ë¦¬ (ì‰¼í‘œ, í™”ì‚´í‘œ, í•˜ì´í”ˆ, ì  ë“±)
            text = text.replace(/[â€¢Â·,â†’\-\.]/g, '');
            
            return text.trim();
        }
        
        // ë‹µì•ˆì— íŠ¹ìˆ˜ë¬¸ìê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
        function hasSpecialSymbols(question) {
            const specialSymbols = ['âˆª', 'â€•', 'Ã—', 'Ï€', 'â–·â—', 'âˆ©', 'Ã·', 'Î”'];
            
            if (!question.answer || !question.answer.keys) {
                return false;
            }
            
            // ëª¨ë“  ë‹µì•ˆ í‚¤ë¥¼ í™•ì¸
            for (const key of question.answer.keys) {
                const keyStr = String(key);
                for (const symbol of specialSymbols) {
                    if (keyStr.includes(symbol)) {
                        return true;
                    }
                }
            }
            
            return false;
        }

        // íŠ¹ìˆ˜ë¬¸ì ì…ë ¥ì´ í•„ìš”í•œ ë¬¸ì œì¸ì§€ í™•ì¸
        function needsSymbolInput(question) {
            // 1. ë‹µì•ˆì— íŠ¹ìˆ˜ë¬¸ìê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ true
            if (hasSpecialSymbols(question)) {
                return true;
            }
            
            // 2. choicesê°€ ìˆê³  ì—¬ëŸ¬ ë‹µì•ˆì´ë©´ ì¼ë°˜ ì…ë ¥
            if (question.choices && question.choices.length > 0) {
                return false;
            }
            
            // 3. íŠ¹ìˆ˜ë¬¸ìê°€ ì—†ìœ¼ë©´ ì¼ë°˜ ì…ë ¥
            return false;
        }

        // ë‹µì•ˆ ë§¤ì¹­ ì²´í¬ (ìŠ¤ë§ˆíŠ¸ ë§¤ì¹­)
        function checkAnswerMatch(user, correct) {
            // ì •í™• ì¼ì¹˜
            if (user === correct) {
                return true;
            }
            
            // ìˆ«ìë§Œ ìˆëŠ” ê²½ìš° (60ë²ˆ ë¬¸ì œ ë“±)
            const userDigits = user.replace(/[^0-9]/g, '');
            const correctDigits = correct.replace(/[^0-9]/g, '');
            
            if (userDigits && correctDigits && userDigits === correctDigits) {
                return true;
            }
            
            // í‚¤ì›Œë“œ ì¶”ì¶œ (í•œê¸€/ì˜ë¬¸ ë‹¨ì–´)
            const getKeywords = (text) => {
                return text.match(/[ê°€-í£]+|[a-z]+/gi) || [];
            };
            
            const userKeywords = getKeywords(user);
            const correctKeywords = getKeywords(correct);
            
            // í•˜ë‚˜ë¼ë„ í‚¤ì›Œë“œê°€ ì—†ìœ¼ë©´ ë‹¨ìˆœ ë¹„êµ
            if (userKeywords.length === 0 || correctKeywords.length === 0) {
                return user === correct;
            }
            
            // í‚¤ì›Œë“œ ë§¤ì¹­ ìˆ˜
            let matches = 0;
            for (const keyword of userKeywords) {
                if (correctKeywords.some(ck => ck.includes(keyword) || keyword.includes(ck))) {
                    matches++;
                }
            }
            
            // 50% ì´ìƒ ë§¤ì¹­
            const matchRate = matches / Math.max(userKeywords.length, correctKeywords.length);
            return matchRate >= 0.5;
        }
        
        // íŠ¹ìˆ˜ë¬¸ì ì…ë ¥ í•¨ìˆ˜
        // íŠ¹ìˆ˜ë¬¸ì ì…ë ¥ ìˆœì„œ ì¶”ì ì€ App.state.symbolInputOrder ì‚¬ìš© (config.js)

        function insertSymbol(symbol) {
            const question = currentQuestions[currentIndex];
            
            // íŠ¹ìˆ˜ë¬¸ì ì…ë ¥ì´ í•„ìš”í•œ ë¬¸ì œë§Œ: ìˆœì°¨ ì…ë ¥ ëª¨ë“œ
            if (needsSymbolInput(question)) {
                const input = document.getElementById('answerInput_0');
                if (!input) return;
                
                // ê°™ì€ ê¸°í˜¸ë¥¼ ë‹¤ì‹œ í´ë¦­í•˜ë©´ ì œê±°
                const currentSymbols = App.state.symbolInputOrder.symbols;
                const symbolIndex = currentSymbols.indexOf(symbol);
                
                if (symbolIndex > -1) {
                    // ì´ë¯¸ ìˆëŠ” ê¸°í˜¸ì´ë©´ ì œê±°
                    currentSymbols.splice(symbolIndex, 1);
                    App.state.symbolInputOrder.inputIndex = currentSymbols.length;
                } else {
                    // ìƒˆë¡œìš´ ê¸°í˜¸ ì¶”ê°€ (16ë²ˆì€ ìµœëŒ€ 5ê°œ, 17ë²ˆì€ 1ê°œ)
                    const maxSymbols = question.q_no === 'Q016' ? 5 : 1;
                    
                    // 17ë²ˆì€ 1ê°œë§Œ ì…ë ¥ ê°€ëŠ¥ (ì´ë¯¸ ì…ë ¥ëœ ê¸°í˜¸ê°€ ìˆìœ¼ë©´ êµì²´)
                    if (question.q_no === 'Q017' && currentSymbols.length > 0) {
                        currentSymbols[0] = symbol;
                        App.state.symbolInputOrder.inputIndex = 1;
                    } else if (currentSymbols.length < maxSymbols) {
                        currentSymbols.push(symbol);
                        App.state.symbolInputOrder.inputIndex = currentSymbols.length;
                    }
                }
                
                // ì…ë ¥ì°½ì— í‘œì‹œ
                input.value = currentSymbols.join(', ');
                return;
            }
            
            // ë‹¤ë¥¸ ë¬¸ì œ: ì¼ë°˜ ì…ë ¥
            const answerInputs = [];
            for (let i = 0; i < 10; i++) {
                const input = document.getElementById(`answerInput_${i}`);
                if (input) {
                    answerInputs.push(input);
                }
            }
            
            if (answerInputs.length === 0) return;
            
            const activeElement = document.activeElement;
            if (activeElement && activeElement.classList.contains('answer-input-small')) {
                const selectionStart = activeElement.selectionStart;
                const selectionEnd = activeElement.selectionEnd;
                const value = activeElement.value;
                
                activeElement.value = value.substring(0, selectionStart) + symbol + value.substring(selectionEnd);
                activeElement.focus();
                activeElement.setSelectionRange(selectionStart + symbol.length, selectionStart + symbol.length);
            }
        }

        // ì´ì „ ë¬¸ì œ
        function prevQuestion() {
            currentIndex--;
            if (currentIndex < 0) {
                currentIndex = currentQuestions.length - 1;
                showMessage('ì²« ë²ˆì§¸ ë¬¸ì œì…ë‹ˆë‹¤. ë§ˆì§€ë§‰ ë¬¸ì œë¡œ ì´ë™í•©ë‹ˆë‹¤.');
            }
            displayQuestion(currentQuestions[currentIndex]);
            
            // ìƒˆ ë¬¸ì œì´ë¯€ë¡œ answeredQuestionsì—ì„œ ì œê±°
            const questionId = currentQuestions[currentIndex].q_no;
            App.state.answeredQuestions.delete(questionId);
            
            // íŠ¹ìˆ˜ë¬¸ì ì…ë ¥ ìˆœì„œ ì´ˆê¸°í™”
            App.state.symbolInputOrder = {
                symbols: [],
                inputIndex: 0
            };
        }
        
        // ë‹¤ìŒ ë¬¸ì œ
        function nextQuestion() {
            currentIndex++;
            if (currentIndex >= currentQuestions.length) {
                currentIndex = 0;
                showMessage('ëª¨ë“  ë¬¸ì œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!');
            }
            displayQuestion(currentQuestions[currentIndex]);
            
            // ìƒˆ ë¬¸ì œì´ë¯€ë¡œ answeredQuestionsì—ì„œ ì œê±°
            const questionId = currentQuestions[currentIndex].q_no;
            App.state.answeredQuestions.delete(questionId);
            
            // íŠ¹ìˆ˜ë¬¸ì ì…ë ¥ ìˆœì„œ ì´ˆê¸°í™”
            App.state.symbolInputOrder = {
                symbols: [],
                inputIndex: 0
            };
        }

        // ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
        function returnToDashboard() {
            const module = App.state.currentModule;
            
            if (module === 'keyword130') {
                keyword130Module.renderDashboard();
            } else if (module === 'code_control') {
                codeControlModule.renderDashboard();
            } else if (module === 'theory') {
                renderTheoryCategoryDashboard();
            } else if (module === 'theory_frequent') {
                theoryFrequentModule.renderDashboard();
            } else if (module === 'pmp') {
                pmpModule.renderDashboard();
            } else {
                // ê¸°ë³¸: ë©”ì¸ í™”ë©´ìœ¼ë¡œ
                location.reload();
            }
        }

        // í•´ì„¤ ë³´ê¸°
        function showExplanation() {
            const explanationDiv = document.getElementById('explanationDiv');
            const question = currentQuestions[currentIndex];
            
            if (question.explanation) {
                explanationDiv.innerHTML = formatCodeBlocks(question.explanation);
                explanationDiv.classList.toggle('show');
            } else {
                explanationDiv.innerHTML = 'í•´ì„¤ì´ ì—†ìŠµë‹ˆë‹¤.';
                explanationDiv.classList.add('show');
            }
        }

        // ë™ì˜ìƒ ì—´ê¸°
        function openVideo() {
            const question = currentQuestions[currentIndex];
            if (question.video_url) {
                window.open(question.video_url, '_blank');
            }
        }

        // ë¬¸ì œê°€ ë°”ë€” ë•Œ ë™ì˜ìƒ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
        function updateVideoButton() {
            const videoBtn = document.getElementById('videoBtn');
            const question = currentQuestions[currentIndex];
            if (question && question.video_url) {
                videoBtn.style.display = 'inline-block';
            } else {
                videoBtn.style.display = 'none';
            }
        }

        // ë‹µ ë³´ê¸° (í•™ìŠµ ëª¨ë“œ - í†µê³„ ë°˜ì˜ ì•ˆ í•¨)
        function showAnswerOnly() {
            const question = currentQuestions[currentIndex];
            const resultSection = document.getElementById('resultSection');
            
            // ì •ë‹µ í…ìŠ¤íŠ¸ ì²˜ë¦¬ (ê´„í˜¸ ì œê±°)
            let answerText = question.answer.raw_text || 'ì •ë‹µ ì—†ìŒ';
            
            // ê´„í˜¸ ì•ˆ ë‚´ìš© ì œê±°
            answerText = answerText.replace(/\([^)]*\)/g, '');
            // â€¢ ì œê±°
            answerText = answerText.replace(/[â€¢]/g, '');
            // ì—¬ëŸ¬ ê³µë°±ì„ í•˜ë‚˜ë¡œ
            answerText = answerText.replace(/\s+/g, ' ').trim();
            
            // ê²°ê³¼ ì˜ì—­ í‘œì‹œ (ì •ë³´ì„± ìŠ¤íƒ€ì¼)
            resultSection.style.display = 'block';
            resultSection.className = 'result-section';
            resultSection.style.background = '#d1ecf1';
            resultSection.style.border = '2px solid #0c5460';
            resultSection.style.color = '#0c5460';
            resultSection.innerHTML = `
                <i class="fas fa-eye"></i> <strong>ì •ë‹µ:</strong> ${formatCodeBlocks(answerText)}
            `;
        }

        // ì„ íƒì§€ ì„ íƒ
        function selectChoice(element) {
            document.querySelectorAll('.choice-item').forEach(item => {
                item.style.background = '#f8f9fa';
            });
            element.style.background = '#667eea';
            element.style.color = 'white';
            
            const answerInput = document.getElementById('answerInput');
            const key = element.querySelector('.choice-key').textContent.trim();
            answerInput.value = key;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            // App ê°ì²´ê°€ ìˆì„ ë•Œë§Œ ì‹¤í–‰
            if (typeof App === 'undefined' || !App.state) {
                console.log('â³ App ê°ì²´ ëŒ€ê¸° ì¤‘ - updateStats ìŠ¤í‚µ');
                return;
            }
            
            const stats = App.state.stats;
            const allQuestions = App.state.allQuestions;
            
            stats.total = allQuestions.length;
            const progress = ((stats.correct + stats.wrong) / stats.total * 100).toFixed(1);
            const accuracy = stats.correct > 0 ? (stats.correct / (stats.correct + stats.wrong) * 100).toFixed(1) : 0;
            
            // ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ì—…ë°ì´íŠ¸
            updateStatWithAnimation('progress', progress + '%');
            updateStatWithAnimation('accuracy', accuracy + '%');
            updateStatWithAnimation('remaining', allQuestions.length - (stats.correct + stats.wrong));
            updateStatWithAnimation('wrongCount', stats.wrong);
        }

        // ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ í†µê³„ ì—…ë°ì´íŠ¸
        function updateStatWithAnimation(id, newValue) {
            const element = document.getElementById(id);
            if (element && element.textContent !== newValue.toString()) {
                element.classList.add('updating');
                setTimeout(() => {
                    element.textContent = newValue;
                    element.classList.remove('updating');
                }, 100);
            }
        }

        // ë©”ì‹œì§€ í‘œì‹œ
        function showMessage(msg) {
            alert(msg);
        }

        // HTML ì´ìŠ¤ì¼€ì´í”„
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ì½”ë“œ ë¸”ë¡ ê°ì§€ ë° ë°•ìŠ¤ë¡œ ë³€í™˜
        function formatCodeBlocks(text) {
            if (!text) return '';
            
            // ë³´ê¸° ì„¹ì…˜ ì²˜ë¦¬ (ìš°ì„  ì²˜ë¦¬)
            if (text.includes('<ë³´ê¸°>') || text.includes('ï¼œë³´ê¸°ï¼')) {
                text = text.replace(
                    /(<ë³´ê¸°>|ï¼œë³´ê¸°ï¼)([\s\S]*?)(?=\n\n|$)/g,
                    function(match, title, content) {
                        return '<div class="choices-section"><span class="choices-section-title">' + title + '</span>' + content + '</div>';
                    }
                );
            }
            
            // <pre> íƒœê·¸ê°€ ì´ë¯¸ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ë°˜í™˜ (ë“¤ì—¬ì“°ê¸° ë³´ì¡´)
            if (text.includes('<pre')) {
                return text;
            }
            
            // HTML íƒœê·¸ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì²˜ë¦¬
            if (text.includes('<img') || text.includes('<table') || text.includes('<div')) {
                const lines = text.split('\n');
                let result = '';
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    // HTML íƒœê·¸ê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ìœ ì§€
                    if (line.includes('<img') || line.includes('<table') || line.includes('</table>') || line.includes('<div') || line.includes('</div>')) {
                        result += line + '\n';
                    } else {
                        // ì›í˜• ìˆ«ìê°€ ë¬¸ì¥ ì‹œì‘ì— ìˆì„ ë•Œë§Œ ì¤„ë°”ê¿ˆ ì¶”ê°€
                        let escapedLine = escapeHtml(line);
                        // ì›í˜• ìˆ«ìê°€ ì¤„ ë§¨ ì•ì— ìˆëŠ” ê²½ìš°ì—ë§Œ ì¤„ë°”ê¿ˆ
                        if (/^([â¶â·â¸â¹âºâ»â¼â½â¾âŠâ‹âŒâââââ‘â’â“])/.test(line.trim())) {
                            escapedLine = escapedLine.replace(/^([â¶â·â¸â¹âºâ»â¼â½â¾âŠâ‹âŒâââââ‘â’â“])/, '<br>$1');
                        }
                        result += escapedLine + '\n';
                    }
                }
                return result;
            }
            
            // ì½”ë“œ ë¸”ë¡ íŒ¨í„´: ë¹ˆ ì¤„ ì´í›„ì— ë‚˜íƒ€ë‚˜ëŠ” ì½”ë“œ ë¸”ë¡ì„ ê°ì§€
            const lines = text.split('\n');
            let result = '';
            let inCodeBlock = false;
            let codeBuffer = '';
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const prevLine = i > 0 ? lines[i - 1] : '';
                
                // ë¹ˆ ì¤„ ì´í›„ì— ë‚˜ì˜¤ëŠ” ê²ƒì„ ì½”ë“œë¡œ ê°„ì£¼
                const isEmpty = line.trim() === '';
                const prevIsEmpty = prevLine.trim() === '';
                
                // ì½”ë“œ ë¸”ë¡ ì‹œì‘ ê°ì§€: ë¹ˆ ì¤„ ì´í›„ + ì½”ë“œ í‚¤ì›Œë“œ ë˜ëŠ” ë“¤ì—¬ì“°ê¸°ê°€ ìˆëŠ” ê²½ìš°
                const isCodeLine = /^(\s*)(#include|#|int main|public class|for\s*\(|while\s*\(|if\s*\(|switch\s*\(|import|package|from|import|def |class |String|int |float |void |char |boolean |âŠ|â¶|â·|â¸|â¹|âº|â»|â¼|â½|â¾|âŠ|â‹|âŒ|â|â|â|â|â‘|â’|â“)/.test(line);
                
                // ì´ì „ ì¤„ì´ ë¹ˆ ì¤„ì´ë©´ì„œ í˜„ì¬ ì¤„ì´ ì½”ë“œë¡œ ë³´ì´ëŠ” ê²½ìš°
                if (prevIsEmpty && isCodeLine) {
                    if (codeBuffer.trim() !== '' && inCodeBlock) {
                        // ì´ì „ ì½”ë“œ ë¸”ë¡ ë‹«ê¸°
                        result += '<div class="code-box"><pre><code>' + escapeHtml(codeBuffer.trim()) + '</code></pre></div>';
                    }
                    inCodeBlock = true;
                    codeBuffer = line + '\n';
                } else if (inCodeBlock) {
                    // ì½”ë“œ ë¸”ë¡ ë‚´ë¶€
                    // ë¹ˆ ì¤„ì´ 2ê°œ ì´ìƒ ì—°ì†ë˜ë©´ ì½”ë“œ ë¸”ë¡ ì¢…ë£Œ
                    if (line.trim() === '' && lines[i + 1] && lines[i + 1].trim() === '') {
                        result += '<div class="code-box"><pre><code>' + escapeHtml(codeBuffer.trim()) + '</code></pre></div>';
                        codeBuffer = '';
                        inCodeBlock = false;
                    } else if (line.trim() === '') {
                        codeBuffer += '\n';
                    } else {
                        codeBuffer += line + '\n';
                    }
                } else {
                    // ì¼ë°˜ í…ìŠ¤íŠ¸ - HTML íƒœê·¸ê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ìœ ì§€, ì—†ìœ¼ë©´ escape
                    if (line.includes('<img') || line.includes('<table') || line.includes('</table>') || line.includes('<div') || line.includes('</div>')) {
                        result += line + '\n';
                    } else {
                        // ì›í˜• ìˆ«ì ë’¤ì— ìë™ ì¤„ë°”ê¿ˆ ì¶”ê°€
                        let escapedLine = escapeHtml(line);
                        // ì›í˜• ìˆ«ì íŒ¨í„´: â¶â·â¸â¹âºâ»â¼â½â¾âŠâ‹âŒâââââ‘â’â“
                        escapedLine = escapedLine.replace(/([â¶â·â¸â¹âºâ»â¼â½â¾âŠâ‹âŒâââââ‘â’â“])/g, '$1<br>');
                        result += escapedLine + '\n';
                    }
                }
            }
            
            // ë§ˆì§€ë§‰ì— ì½”ë“œ ë¸”ë¡ì´ ë‚¨ì•„ìˆìœ¼ë©´ ì¶”ê°€
            if (codeBuffer.trim() !== '') {
                result += '<div class="code-box"><pre><code>' + escapeHtml(codeBuffer.trim()) + '</code></pre></div>';
            }
            
            return result;
        }

        // í°íŠ¸ í¬ê¸° ì„¤ì •
        function setFontSize(size) {
            // bodyì˜ í°íŠ¸ í´ë˜ìŠ¤ ì œê±°
            document.body.classList.remove('font-smallest', 'font-small', 'font-normal', 'font-large');
            // ìƒˆ í°íŠ¸ í¬ê¸° í´ë˜ìŠ¤ ì¶”ê°€
            document.body.classList.add('font-' + size);
            
            // active í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸ (eventê°€ ìˆì„ ë•Œë§Œ)
            if (typeof event !== 'undefined' && event && event.target) {
                document.querySelectorAll('.font-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            }
            
            // localStorageì— ì €ì¥
            localStorage.setItem('fontSize', size);
        }

        // ì €ì¥ëœ í°íŠ¸ í¬ê¸° ë¡œë“œ
        function loadFontSize() {
            const savedSize = localStorage.getItem('fontSize') || 'normal';
            // body í´ë˜ìŠ¤ë§Œ ì„¤ì • (event ì—†ì´)
            document.body.classList.remove('font-smallest', 'font-small', 'font-normal', 'font-large');
            document.body.classList.add('font-' + savedSize);
        }

        // í–„ë²„ê±° ë©”ë‰´ í† ê¸€
        function toggleMenu() {
            const sidebar = document.getElementById('sidebarMenu');
            const overlay = document.getElementById('menuOverlay');
            
            sidebar.classList.toggle('show');
            overlay.classList.toggle('show');
        }
        
        // PMP ë©”ë‰´ í† ê¸€
        function togglePMPMenu() {
            const subMenu = document.getElementById('pmpSubMenu');
            const icon = document.getElementById('pmpMenuIcon');
            
            if (subMenu.style.display === 'none') {
                subMenu.style.display = 'block';
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                subMenu.style.display = 'none';
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }

        // ë©”ë‰´ ë‹«ê¸°
        function closeMenu() {
            const sidebar = document.getElementById('sidebarMenu');
            const overlay = document.getElementById('menuOverlay');
            
            sidebar.classList.remove('show');
            overlay.classList.remove('show');
        }

        // í†µê³„ ëª¨ë‹¬ í† ê¸€
        function toggleStats() {
            closeMenu();
            const modal = document.getElementById('statsModal');
            modal.style.display = 'flex';
            
            // ëª¨ë‹¬ì— í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('modalProgress').textContent = document.getElementById('progress').textContent;
            document.getElementById('modalAccuracy').textContent = document.getElementById('accuracy').textContent;
            document.getElementById('modalRemaining').textContent = document.getElementById('remaining').textContent;
            document.getElementById('modalWrongCount').textContent = document.getElementById('wrongCount').textContent;
        }

        // í†µê³„ ëª¨ë‹¬ ë‹«ê¸°
        function closeStats() {
            const modal = document.getElementById('statsModal');
            modal.style.display = 'none';
        }

        // í°íŠ¸ í¬ê¸° ëª¨ë‹¬ ì—´ê¸°
        function openFontModal() {
            closeMenu();
            const modal = document.getElementById('fontSizeModal');
            modal.classList.add('show');
            
            // í˜„ì¬ ì„ íƒëœ í°íŠ¸ í¬ê¸° í‘œì‹œ
            const currentSize = localStorage.getItem('fontSize') || 'normal';
            document.querySelectorAll('.font-size-option').forEach(opt => opt.classList.remove('active'));
            document.querySelectorAll('.font-size-option').forEach(opt => {
                if (opt.onclick.toString().includes(currentSize)) {
                    opt.classList.add('active');
                }
            });
        }

        // í°íŠ¸ í¬ê¸° ëª¨ë‹¬ ë‹«ê¸°
        function closeFontModal() {
            const modal = document.getElementById('fontSizeModal');
            modal.classList.remove('show');
        }

        // í°íŠ¸ í¬ê¸° ì„ íƒ
        function selectFontSize(size) {
            const currentSize = localStorage.getItem('fontSize') || 'normal';
            setFontSize(size);
            
            // active í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.font-size-option').forEach(opt => opt.classList.remove('active'));
            event.target.closest('.font-size-option').classList.add('active');
        }

        // ì‚¬ìš© ë°©ë²• ë³´ê¸°
        function showWelcome() {
            closeMenu();
            document.getElementById('welcomePopup').classList.add('show');
        }

        // ì§„í–‰ ìƒí™© ì €ì¥
        function saveProgress() {
            if (typeof App !== 'undefined' && App.state) {
                localStorage.setItem('progress', JSON.stringify({
                    correct: App.state.stats.correct,
                    wrong: App.state.stats.wrong
                }));
            }
        }

        // ì§„í–‰ ìƒí™© ë¡œë“œ
        function loadProgress() {
            const saved = JSON.parse(localStorage.getItem('progress') || '{}');
            if (typeof App !== 'undefined' && App.state) {
                App.state.stats.correct = saved.correct || 0;
                App.state.stats.wrong = saved.wrong || 0;
            }
        }

        // ì˜¤ë‹µ ì¶”ê°€
        function addWrongQuestion(qNo) {
            const wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions') || '[]');
            if (!wrongQuestions.includes(qNo)) {
                wrongQuestions.push(qNo);
                localStorage.setItem('wrongQuestions', JSON.stringify(wrongQuestions));
            }
        }

        // ì˜¤ë‹µ ì œê±°
        function removeWrongQuestion(qNo) {
            const wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions') || '[]');
            const index = wrongQuestions.indexOf(qNo);
            if (index > -1) {
                wrongQuestions.splice(index, 1);
                localStorage.setItem('wrongQuestions', JSON.stringify(wrongQuestions));
            }
        }

        // ë¬¸ì œ ì²´í¬
        function markQuestion(qNo) {
            const markedQuestions = JSON.parse(localStorage.getItem('markedQuestions') || '[]');
            const btn = event.target.closest('button');
            
            if (!markedQuestions.includes(qNo)) {
                markedQuestions.push(qNo);
                localStorage.setItem('markedQuestions', JSON.stringify(markedQuestions));
                btn.innerHTML = '<i class="fas fa-check"></i> ì²´í¬ë¨';
                btn.style.background = '#28a745';
            } else {
                const index = markedQuestions.indexOf(qNo);
                markedQuestions.splice(index, 1);
                localStorage.setItem('markedQuestions', JSON.stringify(markedQuestions));
                btn.innerHTML = '<i class="fas fa-star"></i> ì²´í¬';
                btn.style.background = '';
            }
        }

        // ì§„í–‰ ì´ˆê¸°í™”
        function resetProgress() {
            if (confirm('ëª¨ë“  ì§„í–‰ ìƒí™©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.clear();
                if (typeof App !== 'undefined' && App.state) {
                    App.state.stats = { total: 0, correct: 0, wrong: 0, wrongQuestions: [] };
                    updateStats();
                }
                location.reload();
            }
        }

        // í™˜ì˜ íŒì—… ë‹«ê¸°
        function closeWelcomePopup() {
            document.getElementById('welcomePopup').classList.remove('show');
            localStorage.setItem('welcomeShown', 'true');
        }

        // ì´ˆê¸°í™” (ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ í›„ ì‹¤í–‰)
        document.addEventListener('DOMContentLoaded', function() {
            // App ê°ì²´ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ëŒ€ê¸°
            function initWhenReady() {
                if (typeof App !== 'undefined' && App.state) {
                    console.log('âœ… App ê°ì²´ ë¡œë“œ ì™„ë£Œ, ì´ˆê¸°í™” ì‹œì‘');
                    
                    loadProgress();
                    loadFontSize();
                    
                    // App.state ì‚¬ìš©í•˜ì—¬ í†µê³„ ì—…ë°ì´íŠ¸
                    if (typeof updateStats === 'function') {
                        updateStats();
                    }
                    
                    // ê¸°ë³¸ ëª¨ë“ˆ í™œì„±í™”
                    const menuItem = document.getElementById(`menu_${App.state.currentModule}`);
                    if (menuItem) {
                        menuItem.style.background = '#667eea';
                        menuItem.style.color = 'white';
                    }
                    
                    // í™˜ì˜ íŒì—… í‘œì‹œ (ì²« ë°©ë¬¸ ì‹œ)
                    if (!localStorage.getItem('welcomeShown')) {
                        document.getElementById('welcomePopup').classList.add('show');
                    }
                } else {
                    console.log('â³ App ê°ì²´ ëŒ€ê¸° ì¤‘...');
                    setTimeout(initWhenReady, 100);
                }
            }
            
            initWhenReady();
        });
    </script>
    
    <!-- ì™¸ë¶€ JavaScript ëª¨ë“ˆ ë¡œë“œ -->
    <script>
        // íŒŒì¼ ì¡´ì¬ í™•ì¸ í›„ ë¡œë“œ
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    console.log('âœ… ë¡œë“œ ì„±ê³µ:', src);
                    resolve();
                };
                script.onerror = () => {
                    console.error('âŒ ë¡œë“œ ì‹¤íŒ¨:', src);
                    reject();
                };
                document.head.appendChild(script);
            });
        }
        
        // ìˆœì°¨ì ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
        async function loadAllScripts() {
            try {
                await loadScript('js/config.js?v=20251217');
                await loadScript('js/app.js?v=20251105004');
                await loadScript('js/utils/validator.js?v=20251105004');
                await loadScript('js/theory-adapter.js?v=20251105004');
                await loadScript('js/theory-module.js?v=20251105004');
                await loadScript('js/theory-frequent-module.js?v=20251105210000');
                await loadScript('js/pmp-module.js?v=20251105230000');
                await loadScript('js/cissp-module.js?v=20251216');
                await loadScript('js/keyword130-module.js?v=20251106');
                await loadScript('js/code-control-module.js?v=20251106');
                await loadScript('js/components/theory-category.js?v=20251105220000');
                await loadScript('js/components/menu.js?v=20251105004');
                await loadScript('js/components/modal.js?v=20251105004');
                await loadScript('js/components/question-display.js?v=20251105004');
                await loadScript('js/modes/range.js?v=20251105004');
                console.log('ğŸ‰ ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
            } catch (error) {
                console.error('ğŸ’¥ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', error);
                alert('ì¼ë¶€ ê¸°ëŠ¥ì´ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            }
        }
        
        loadAllScripts();
    </script>
</body>
</html>

