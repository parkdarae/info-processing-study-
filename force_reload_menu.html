<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>캐시 클리어 & 메뉴 복구</title>
    <script>
        window.onload = function() {
            console.log('캐시 클리어 시작...');
            
            // 모든 캐시 삭제
            if (window.caches) {
                caches.keys().then(function(names) {
                    for (let name of names) {
                        caches.delete(name);
                        console.log('캐시 삭제:', name);
                    }
                    console.log('✅ 모든 캐시 삭제 완료!');
                });
            }
            
            // 로컬 스토리지 백업 (학습 데이터 보존)
            const progress = localStorage.getItem('progress');
            const wrongAnswers = localStorage.getItem('wrongAnswers');
            const markedQuestions = localStorage.getItem('markedQuestions');
            
            console.log('학습 데이터 백업 완료');
            
            // 세션 스토리지 삭제
            sessionStorage.clear();
            console.log('세션 스토리지 삭제 완료');
            
            // 학습 데이터 복원
            if (progress) localStorage.setItem('progress', progress);
            if (wrongAnswers) localStorage.setItem('wrongAnswers', wrongAnswers);
            if (markedQuestions) localStorage.setItem('markedQuestions', markedQuestions);
            
            console.log('학습 데이터 복원 완료');
            
            // 메시지 표시
            document.body.innerHTML = `
                <div style="
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    font-family: 'Noto Sans KR', sans-serif;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    text-align: center;
                    padding: 20px;
                ">
                    <div style="
                        background: white;
                        color: #333;
                        padding: 40px;
                        border-radius: 20px;
                        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                        max-width: 500px;
                    ">
                        <h1 style="margin-bottom: 20px; color: #667eea;">
                            ✅ 캐시 클리어 완료!
                        </h1>
                        <p style="margin-bottom: 20px; line-height: 1.6;">
                            브라우저 캐시가 완전히 삭제되었습니다.<br>
                            (학습 데이터는 안전하게 보존되었습니다)
                        </p>
                        <p style="
                            background: #f0f4ff;
                            padding: 15px;
                            border-radius: 10px;
                            margin-bottom: 20px;
                            color: #667eea;
                            font-weight: 500;
                        ">
                            3초 후 자동으로 메인 페이지로 이동합니다...
                        </p>
                        <button onclick="location.href='http://localhost:8000'" style="
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                            border: none;
                            padding: 15px 30px;
                            border-radius: 10px;
                            font-size: 16px;
                            cursor: pointer;
                            font-weight: 500;
                        ">
                            지금 이동하기 →
                        </button>
                    </div>
                </div>
            `;
            
            // 3초 후 자동 리디렉션
            setTimeout(function() {
                window.location.href = "http://localhost:8000?" + new Date().getTime();
            }, 3000);
        };
    </script>
</head>
<body>
    <p>캐시 클리어 중...</p>
</body>
</html>



