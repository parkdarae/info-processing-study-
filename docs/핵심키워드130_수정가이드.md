# 핵심 키워드 130 문제 검증 및 수정 가이드

이 문서는 "핵심 키워드 130" 문제 데이터의 품질을 검증하고, 발견된 문제점들을 체계적으로 수정하기 위한 가이드라인을 제공합니다.

## 1. 검증 결과 확인

`scripts/validate_keyword130.py` 스크립트를 실행하면 `data/keyword130_validation_report.json` 파일이 생성됩니다. 이 파일에는 모든 문제에서 발견된 품질 이슈들이 우선순위별로 정리되어 있습니다.

### 최근 검증 결과 요약

```
총 130개 문제 중 140개 이슈 발견
- 우선순위 1 (이미지 누락): 89개
- 우선순위 2 (파일 또는 정답 누락): 6개
- 우선순위 3 (해설 누락): 45개
```

### 이미지 매칭 완료 현황

다음 9개 문제는 이미지가 이미 매칭되었습니다:
- Q007: images/7.png
- Q014: images/14.png  
- Q040: images/40.png
- Q047: images/47- 표1번.png, images/47-표3번.png, images/47-표4번.png
- Q060: images/60.png
- Q066: images/66.png
- Q098: images/98.png

### PDF 해설 추출 완료 현황

85개 문제에 해설이 자동 추출되어 추가되었습니다. 45개 문제는 추출 실패하여 수동 입력이 필요합니다.

## 2. 우선순위별 수정 절차

### 2.1. 우선순위 1: 이미지 누락 (89개)

`question_text`에 이미지 관련 키워드("아래", "다음", "그림", "표", "도표" 등)가 있지만 `image_refs`가 비어있는 문제입니다.

**수정 절차:**

1. **PDF 원본 확인:**
   - `정보처리기사실기_01_키워드찾기130문제.pdf` 파일을 엽니다
   - 해당 문제 번호로 이동하여 실제로 이미지나 표가 있는지 확인합니다

2. **실제 이미지가 있는 경우:**
   ```
   a. PDF에서 이미지 캡처 (Windows: Win+Shift+S, Mac: Cmd+Shift+4)
   b. images/{문제번호}.png 형식으로 저장 (예: images/3.png)
   c. items.jsonl에서 해당 문제를 찾아 image_refs 배열에 추가:
      "image_refs": ["images/3.png"]
   ```

3. **실제 이미지가 없는 경우:**
   - 텍스트로만 설명되어 있는 경우 이미지 추가 불필요
   - 검증 스크립트의 오탐지로 간주

**예시 (Q003 수정):**

```json
{
  "doc_id": "keyword130",
  "q_no": "Q003",
  "question_text": "3. 요구사항 확인에 대한 다음 설명에서...",
  "image_refs": [],  // <- 이 부분 수정 필요시
  ...
}
```

### 2.2. 우선순위 2: 파일 또는 정답 누락 (6개)

#### A. 이미지 파일 실제 누락 (6개)

`image_refs`에 경로가 있지만 실제 파일이 없는 경우입니다.

**주의:** 현재 검증 결과는 스크립트 버그일 수 있습니다. `images/` 디렉토리에 실제 파일이 있는지 먼저 확인하세요.

**수정 절차:**
1. `images/` 디렉토리에서 해당 파일 존재 여부 확인
2. 파일이 없는 경우:
   - PDF에서 이미지 추출
   - 올바른 경로에 저장
3. 파일이 있는데 검증 오류가 발생한 경우:
   - `image_refs`의 경로 형식 확인 (예: "images/7.png" vs "7.png")

#### B. 정답 누락

`answer.keys` 배열이 비어있는 경우입니다.

**수정 절차:**
1. PDF 원본에서 정답 확인
2. `items.jsonl`에서 해당 문제 찾기
3. `answer.keys` 배열에 정답 추가

```json
{
  "answer": {
    "keys": ["정답1", "정답2"],  // <- 추가
    "raw_text": "정답1, 정답2"
  }
}
```

### 2.3. 우선순위 3: 해설 누락 (45개)

해설이 없거나 너무 짧은 (<30자) 경우입니다.

**수정 절차:**

1. **PDF 원본 확인:**
   - `정보처리기사실기_01_키워드찾기130문제.pdf`에서 해당 문제의 해설 부분 찾기
   - 해설은 보통 문제 아래 또는 답안과 함께 제공됨

2. **해설 추가:**
   ```json
   {
     "explanation": "상세한 해설 내용을 여기에 입력합니다. 개념 설명, 예시, 풀이 과정 등을 포함합니다."
   }
   ```

3. **해설 작성 가이드:**
   - 개념 정의: 문제에서 다루는 핵심 개념을 명확히 설명
   - 예시 제공: 가능하면 구체적인 예시나 그림 설명 포함
   - 답 도출 과정: 왜 그 답이 정답인지 논리적으로 설명
   - 최소 길이: 50자 이상 권장

## 3. Cursor를 이용한 1:1 수정 방법

`items.jsonl` 파일은 JSONL(JSON Lines) 형식으로, 각 줄이 하나의 JSON 객체(문제)를 나타냅니다.

### 수정 절차

1. **파일 열기:**
   - Cursor에서 `items.jsonl` 파일 열기

2. **문제 찾기:**
   - `Ctrl+F` (Windows) 또는 `Cmd+F` (Mac)
   - 검색: `"q_no": "Q003"` (수정할 문제 번호)

3. **필드 수정:**
   - `image_refs` 배열에 이미지 경로 추가
   - `explanation` 필드에 해설 추가
   - `answer.keys` 배열에 정답 추가

4. **저장:**
   - `Ctrl+S` (Windows) 또는 `Cmd+S` (Mac)

### 주의사항

- **JSON 문법:** 각 줄은 완전한 JSON 객체여야 합니다
- **쉼표:** JSON 배열과 객체 내 마지막 항목 뒤에는 쉼표 없음
- **따옴표:** 문자열은 큰따옴표(`"`)로 감싸야 함
- **이스케이프:** 줄바꿈은 `\n`, 따옴표는 `\"`로 표현

## 4. 수정 예시 (Before/After)

### Before (이미지 누락, 해설 짧음)

```json
{
  "doc_id": "keyword130",
  "q_no": "Q014",
  "question_text": "14. 다음 E-R 다이어그램을 참고하여...",
  "explanation": null,
  "image_refs": [],
  "answer": {"keys": ["㉡", "㉢", "㉠", "㉣", "㉤"], "raw_text": "..."}
}
```

### After (이미지 추가, 해설 추가)

```json
{
  "doc_id": "keyword130",
  "q_no": "Q014",
  "question_text": "14. 다음 E-R 다이어그램을 참고하여...",
  "explanation": "E-R 다이어그램의 구성 요소:\n\n- 관계 집합: 마름모(◇) 기호로 표현\n- 개체 집합: 직사각형(□)으로 표현, 키 속성에는 밑줄\n- 속성: 타원(○)으로 표현\n- 연결: 실선으로 개체와 관계를 연결\n\n위 다이어그램에서:\n㉠: 개체 집합\n㉡: 관계 집합\n㉢: 관계 집합과 속성을 연결하는 선\n㉣: 속성\n㉤: 개체와 관계를 연결하는 선",
  "image_refs": ["images/14.png"],
  "answer": {"keys": ["㉡", "㉢", "㉠", "㉣", "㉤"], "raw_text": "..."}
}
```

## 5. 작업 진행 체크리스트

- [x] 이미지 매칭 스크립트 실행 완료 (9개 문제)
- [x] PDF 해설 자동 추출 완료 (85개 문제)
- [x] 데이터 검증 스크립트 실행 완료
- [ ] 우선순위 1: 이미지 누락 89개 문제 수정
  - [ ] PDF 확인하여 실제 이미지 필요 여부 판단
  - [ ] 필요한 이미지 캡처 및 저장
  - [ ] `items.jsonl`에 `image_refs` 추가
- [ ] 우선순위 2: 파일/정답 누락 6개 문제 수정
  - [ ] 이미지 파일 존재 여부 재확인
  - [ ] 누락된 정답 추가
- [ ] 우선순위 3: 해설 누락 45개 문제 수정
  - [ ] PDF에서 해설 내용 확인
  - [ ] 상세한 해설 작성 및 입력
- [ ] 전체 검증 재실행 (`py scripts/validate_keyword130.py`)
- [ ] Git 커밋 및 Vercel 배포

## 6. 자주 묻는 질문 (FAQ)

**Q: 이미지 파일명 규칙은?**
A: `images/{문제번호}.png` (예: images/7.png, images/14.png)

**Q: 표가 여러 개인 경우?**
A: `images/{문제번호}-표{번호}.png` (예: images/47- 표1번.png)

**Q: PDF에서 이미지를 어떻게 추출하나요?**
A: 
- Windows: `Win+Shift+S`로 화면 캡처
- Mac: `Cmd+Shift+4`로 영역 캡처
- 또는 PDF 리더의 "스냅샷" 도구 사용

**Q: 해설이 PDF에 없는 경우?**
A: 기본 개념 설명과 답 도출 논리를 직접 작성합니다.

**Q: JSON 문법 오류가 발생하면?**
A: 온라인 JSON 검증 도구(jsonlint.com)를 사용하여 문법 확인

## 7. 참고 자료

- **원본 PDF:** `C:\Users\darae\Desktop\info_ver4\정보처리기사실기_01_키워드찾기130문제.pdf`
- **데이터 파일:** `items.jsonl` (루트 디렉토리)
- **검증 리포트:** `data/keyword130_validation_report.json`
- **백업 파일:**
  - `items.jsonl.backup_images` (이미지 매칭 전)
  - `items.jsonl.backup_explanations` (해설 추출 전)

이 가이드를 참고하여 효율적이고 정확하게 문제 품질 개선 작업을 수행할 수 있습니다.

